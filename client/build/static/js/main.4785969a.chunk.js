(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{150:function(e,t,a){},152:function(e,t,a){},153:function(e,t,a){"use strict";a.r(t);var s=a(1),c=a.n(s),n=a(19),r=a.n(n),i=(a(122),a(10)),l=a(11),d=a(13),j=a(12),o=a(62),h=sessionStorage.getItem("token"),b=h?JSON.parse(o.a.decode(h)):null,u={user:b||{}},O=a(20),p=a(23),x=(a(89),a(90),a(4)),m=a.n(x),g=a(2),v=a(8),f=a(194),y=a(106),_=a(214),S=a(209),w=a(196),N=a(197),D=a(198),k=a(199),C=a(0),P=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={},s}return Object(l.a)(a,[{key:"render",value:function(){return Object(C.jsx)(C.Fragment,{children:Object(C.jsx)("div",{className:"sideBar-ctr",children:Object(C.jsxs)("div",{className:"sidebar",children:[Object(C.jsx)("label",{htmlFor:"nav-toggle",className:"close-on-sm",children:Object(C.jsx)("span",{className:"las la-times"})}),Object(C.jsx)("div",{className:"sidebar-brand",children:Object(C.jsxs)("h2",{children:[Object(C.jsx)("span",{className:"las la-clinic-medical",style:{fontSize:"32px"}}),Object(C.jsx)("span",{children:"Pharmacy"})]})}),Object(C.jsx)("div",{className:"sidebar-menu",children:Object(C.jsxs)("ul",{children:[Object(C.jsx)("li",{children:Object(C.jsx)(O.b,{to:"/",children:Object(C.jsxs)("span",{className:"".concat("dashboard"===this.props.active?"active":""," _a_replaced"),children:[Object(C.jsx)("span",{className:"las la-home"}),Object(C.jsx)("span",{children:"Dashboard"})]})})}),Object(C.jsx)("li",{children:Object(C.jsx)(O.b,{to:"/new-sale",children:Object(C.jsxs)("span",{className:"".concat("sale"===this.props.active?"active":""," _a_replaced"),children:[Object(C.jsx)("span",{className:"las la-user-plus"}),Object(C.jsx)("span",{children:"New Sale"})]})})}),Object(C.jsx)("li",{children:Object(C.jsx)(O.b,{to:"/new-purchase",children:Object(C.jsxs)("span",{className:"".concat("purchase"===this.props.active?"active":""," _a_replaced"),children:[Object(C.jsx)("span",{className:"las la-prescription-bottle-alt"}),Object(C.jsx)("span",{children:"New Purchase"})]})})})]})})]})})})}}]),a}(s.Component),A=a(21),U=a.p+"static/media/place-holder.8c84566a.jpg",T=a(211),q=a(195),I=a(56),F=a.n(I),E="http://localhost:5000/api",W=function(){function e(){Object(i.a)(this,e)}return Object(l.a)(e,null,[{key:"login",value:function(){var e=Object(v.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.a.post("".concat(E,"/user/admin/login"),t);case 3:return a=e.sent,e.abrupt("return",a.data);case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return","Error");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"data",value:function(){var e=Object(v.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.a.get("".concat(E).concat(t));case 3:return a=e.sent,e.abrupt("return",a.data);case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return","Error");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),R=a.p+"static/media/doctor.26885907.png";a(150);var z=function(){var e=Object(s.useState)({username:"",password:"",_cp:!0}),t=Object(A.a)(e,2),a=t[0],c=t[1],n=Object(s.useState)(!1),r=Object(A.a)(n,2),i=r[0],l=r[1],d=Object(s.useState)(""),j=Object(A.a)(d,2),h=j[0],b=j[1],u=function(){var e=Object(v.a)(m.a.mark((function e(t){var s,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,W.login({username:a.username,password:a.password});case 3:if("Error"===(s=e.sent)){e.next=17;break}if(!1!==s.status){e.next=11;break}return c(Object(g.a)(Object(g.a)({},a),{},{_cp:!1})),l(!1),e.abrupt("return");case 11:n=o.a.encode(JSON.stringify(s.user)),sessionStorage.setItem("token",n),window.location.replace("/"),l(!1);case 15:e.next=19;break;case 17:b("Server Error..."),setTimeout((function(){l(!1),b("")}),5e3);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(C.jsxs)("div",{style:{width:"100%",height:"100%",backgroundColor:"white"},className:"m-ctr",children:[Object(C.jsxs)("div",{className:"ctr",children:[Object(C.jsx)("img",{alt:"Hospital",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfQAAAH0BAMAAAA5+MK5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAlwSFlzAAALEwAACxMBAJqcGAAAACFQTFRFR3BMKaviKaviKaviKaviKaviKaviKaviKaviKaviKaviLYe6WQAAAAp0Uk5TAMI76YBamhAgcMxHq9UAAA+BSURBVHja7J3Pc9NIFsfbSmwZTlHiOIxOjgk/klOSSsLiU344hPXJkBShfMrPgvXJAZKp4WRYQi2cIDO1m5rTCBEv9F+5+tVSd6tlD1Nbif30viesUrA/6u7X771+3SIEhUKhUCgUCoVCoVAoFAqFQqFQKBQKhUKhUCgUCoVCoVAoFAqFQqFQKBQKhUKhUCgUCoVCoVAoFAqFQqFQKBQKhUKhUCgUCoVCoVAoFAqFQqFQKBQKhUKhUCgUCoVCoVAoFAqFQqFQf1H5z5QWS2kk15vUkdVOIfok9TSfwu5e8dFpCrq8vmVQOnfOPmYCcvo3duXDGKXGegse+W3TJ30WfK4xdCu4cBJ83IPWvfdD0sCusf5OaVscAHQJlOXLmiEoHfGvRBd2xAHgPJ06HPL3URNT+t27lJOfRY27xX4OZphTXrbcyH9IA8AVkAE/SUWVVOiadNMoRHJaV6FnKTz2GDldVqEPU3Dsb6gafVgyc3F0emPAbTtNQOfG9qcEdDrQdv5VJQmds+itJHR7Y4A9GRV5gN5gH7+SJHRqD6xvo5k0GT30aSaS0ak1oGGdn4uIy29KPXgudpsoJzdfncEM5H5V07AA/YRv9JhLw3QfxoQu5SY2ebQk9EGc3k9oD/RHq1OGcfih0AM9DPAH3Ljz6Cadq1bHKO2FPmhmXjdpL/SakKRJRqfWYJm6IdoT/aX/6VtPdDo7SOmoeqYLSdCBtQr/KdvlD0ayA5Oy+mDO5pOHeuDSBFPAYvBhOPl+uz1knQ+GD7dC6ZfkqY0lpFwbT2mBjeMu3WSUzDg39r9fpz+peLZLr/Ueuvr0Xqu3cfjaIq7NtA/73NpNmyzLml8TCaIR8IVEPg3r727Dsv4t/t1Cm7n71lk/g4/xcceTkNYurkYfaIcZQ961i/x9+3BqN/rLQz4KmuvXIX9rn487HKb8luH8auPgsTesqbTm4M9ny9xjYBp3/q8HhvP8jHXnVo2PgpYe93WLB+0VjWO584/E0TNyJw/twW1prpjrs26vbym8N7uwXi63s9VVfr3B1UUcvSHesUOmqvV8uby1opgkrT5aktQ+J87i464vv0huqvw5Dl3y5eZdC2jXHyXO9D/1x1Q3vZs8Je/5UcyO5NJ/l9F/l5z2nB+3vE92jIpX3u9fPOgSp9j/Oa4ENj2nyDNH6G/k7u5bNns72+V/tw7uXGFH3xrr4nnTpVLYajt+XsI4YNZ6vBUkZR2DprOO3XHNujs+cuGyo1tqlKy59Svp+G//3ZXbpXvEpRf13cJZm3NvrYPVkmPbOtoU129GSX56pdDi0pnj5Hal67fM/ePupWKXt3a7/yAH7Ty/L8fcupit6zgz2j0xdXm/Jcf6S21tv8dX2cX18mWRN2hPLZWOTdFmOzqSbipTuipdmohl9axtzi1M1JdLQs/0+iH2Hnki5ZSzlblVaaGdjpi29DT2yNSYXZey2Ick26vh6WUlsbSeTS79VrvkDd9RKZT9MvN9RgpPJz3DIK1dLNXDIqQEXZC+6PHWeayHbgTtOCrm5q3crEC0GDyaTmtY/A+cIKa7qb+8zGWXbJITVh+PxVaLGfGzvMB697HwJNon4bqDnMqe2+7W6xcv0cRvJv2IQinePPPR7VYpR41C6JjvhBN4YcWgO1E/X4xneX5qk9OE6fRS62wTltMKJYU1FjDc9okI//taWFfclEe93OvJ9P7VJ+rzTUWgVgqTNHwAKkB0dEJe7XqtZxvG/E3D8B7VXHGDkFaTdmX30jSnu1e+Cq9/ln3Kdixk98hbPIJ1pznH+x8tzksa67wwe7B7wbr2RPiaq6gvPA6HrONOOf11SjUSFwVy+5Pfp+eMg2rrg0G/1qhxrlcfGP6fLl6r9GKnjnfgBE2/GQz8qpKV5a1q9e9lN4DSnign3nHRID6b9Hu6Q3pxzU22umnbTw2373vwoyeikVAGrdahF7O8vVWtVsvkiqUnhex7upCZuvGe/fBy+Y7J0K0Xe2/dFJyb6Hn+Rhwsv1QSgvW+yNMkhzL2QyGjSEdfOU5pS59eGXNH6COGbj91zLbljhlndtgQOnmnpDWvPmT5cc9uqS5GMIuvKtZ2nuWy7PpmgP6c0RW3tX17Y1OMXfTELNXVl5ZplaRwXYy0F44rVulddMn6l+k48Y7Dw7GO65v29poUCH1QWpG+KJ5WJpGWtqUEtEce9uZR5xHMn7gujXUSfAyy0L9K7M4llfvuhLJ9saQc+2nWquzcdE4rdj0ax1+9mKM5kqHP3PsWovt+Nu2nTdmR0XbjXm2f6IWQLi+exUKNzluTTsghyUWufmzJ6Yv72Yp1tylbDaJx32D32apr+bcVw1X1rO0tM8fIF+PVNaXs8kTMgt+YpDF2b4n5VtX/gn5cekqc5BdOTSc+iU9T9zKz8fDX3nZufrrWp1N5VykCGDcbP3EUt1X3Zi4UxRQXRy7/Wtyy9T36sHLtyWop5oGdpqUqPNmuKFedlvseXSqBtx96heETOcUE9bMz3BVJD3e2d0LRd5XBK45/Z/Lrgrf9SqDf44N62ekgO6rA/xc/AOBXMa2HZCCU3zICP7sdLKd9Dzv2UjtYT3GckiG3ai5YqRhvR+UHI2aQ0ssH8YFXYjAwyrO1QC+Mn83waTTts1Fc9d1/dx/A6YpR3OYzfhcfWWDuOQ2DhC17+dPV0oywiTOaDGzhcbES+Wz1rESgyBQriKKVDAHx6NLT6pfQ/VWNHkdnC40jgNBzKq8kjs6q574BQh9SLY0p0DN8wQkMfQyWHHqhZwfFZ/3hLNZIL/Q8v88bhmoqN1yBzvY8tuGgN1WTlgrdBHdgi5JIhd6Eik56ote4zc0pQ28MTGz+f0efSS862FZvpXesi5ObnorJraYI3AhJ9OYgoTeU5ZyJ4QsF5MgGhttu9UBvwAtfhoRzKRLRs8LJHaBSFdKxGzF0VqYAKVWRVx49IaMfxXa9AprdxKMnJPSodKwOCX1GdeyGiB4tQkOycsKhguMtJfrtyqVvabgc8ftZrKfBRbdSIEAXNrgsg0IX9zcuSXUCp0JBCqz+Hts0YhvVs3JY9CdWkk8AQ08oLbSNg8ctsb8P2Fksf0LJm0bswjbRN+E2OpF3M4tFQqWwAhxeoyeePhfWfb5XBrYwdNJ9C6zPvkhA6mZX9kWXHWJ39/yata7sN8ikXSJAle++N/UTAUveq92h9nal4wbtrORu4IqyaWHHM1jyrLchT0s+6gHum1Aa3mYW1725Vd01zBSNdr0in6RULm89GFOeRQdMYbWoeKoIXwZ8ARQ9TNDZ52GWxrcB4XxvA0U3pWx8tMQUxax1kOSavA7Br66tDeDBqX9eOblQlkdnIS3Mwf5ahjP5NdUjRe00pFldrJgQ0IN0NUw715RTzQI6+Se4qgLZwH8TLnAPYhiwiY/5ayK6DnLphUevJ6EHvQKiK6vFxrKEXoOOThA9Tej5WMVkatBTbOaCzR33ktCvAZ7cTDkHJaLPAPbmGvIisoDOqoggR27RyXg8Oju8D2bklpPPQ+TRN0FWT0mzW5SmidCjBBVIA8+978H2t+XvGkbRH+f7sdd+AdNLvnyMu84d5ARzqEsFZHax+rjs149x9VNA+7u6gMwqPI3e2gx3mTmbdCgfe6vpBAGrzcT6qRPotQWJBWTPvbq5HQJYSe8usz85Mes8Aa33iXU02gIBrtupK6iI9K6StjqacIIrJbzSA36zN6y64qTz+NZHgOFbxask0rZ2zcR3OgJVxj9gN3oUt1Yo6FA90kz4oj5CpqpVN3rNNmHX0ZAoMxMmqWrBxt18E3IdjZSp8cMUhs6O3IY92HN8QiJEDzYJfAONPsQ3b4SugTtrLa6P/OlaEbq/3maBRm/wCbhaVE71Er6Jr/ETeC36Zw7aWWsJc9tsHD0LORPNoY/E0fWUoC/H0Qm085d+AL0Cdm1did6Q0eupGeszEXoe/lgXJreZVE1uDX6lgUNvwHdpXvO7GCP0a6CXWfmOTTdE9GBRBnaaRgvfuMuhH5upSM6Z4YsI22TSMNyuPwm8ooLwIVqw1mQYRmG9Tdg7wGAPdcX7nO3xVrCrfQI4uqKyolPSa/A37hP+bDXuxcLuuz/ANzpRvX31qzO9dUgKpDivYoJkS2lAV5zVAX+cM/b4C0hHUoJ+TI7lVeZOStDNBcePcV+pXK2GxzWkYqi7Xo3/mtWMYYyQUxPwvnVZ3uJT0TFs1yn9g4VtF6lAb7DKGR/dD2TtdAx1Vi8VoPt18vU0TG1h/2boGQq9SJQ58eE8fj2wbvm02LlcOJddZ65MMwVFRKx7+0YtRG+kCL0jol8H9iaAJF0PZ/EQPZMi9C/pRB9Kb6srxvrrlHiyubAKWrDw31KAng19t6EA3Tt9MBWhW4V170yAnhpH1l9jr3Po/2vv7nmbhqIwjt+YOJhOoaQIeTIRC5k6FclTh0iVMhUJCalTCkJImSqhgmAqCwNTxQJjUidV40+Jz72209CNsc//9w2eunbOfTt3du/X1hufmruM6ujfdWao4maNveP/zcOZzlcS0evV1j0Xj8dZcwDqWCN63VDwwO5/eV0KbIq+NVnRthYd/PoSbvmZikTfXOFVpX8XzXQeumvvcgwXISQzgZONra3D3LvJb+dEsx87KbcPtq6kkp/+cS+elKXUgltb0O2duWj45rQUKuVcPVytqvaoqub8dsGlUPQTf8NN175wdrLx3p/f3q7i175nRxbqG51v/MOw9BSiJ0L7ScKWyayJbjMVUtFt6amOXr34c6Xoi030n7rRd3Sjf1PZRHT3XR8pfeZsKv7Cl7P1F34qVdJM/cPPwtqL0LA1HOmMfN/wnsrOsXb4UlxY9PBnUBq+xP5yUh/9s9ig1S+zPbPo/jyI0lRFmI7+MBye53ITVGEV4iD7ketNS4b+msXR11yiteKW53Un0Xhwpha97q/ZNotXkpy/V+kkeqei23UvU1/aqInsgScTqVHbppb9+PhplEtVsc0IZu3KRVXbKE3CN+PWvkVPcrWKxiX2tG2a6kTuZY9tp1y+sHd+Xyx61+Yq0oXNVMzloleJ7bz+I8Ho1f95urTfd73ofdXosW50n9iix3qVbH4ToveU1h+C2dq5ydJ+1zO16KMiRB8Vasldp7x0EytrVnLRk3xl0QVfdesJfzS5EmnA9O9jT4v8Oi0OBaO7aJxeD946TaMrp2p0oxt9TnQ9O0RXjL4vG/1BXzZ6h+iCelPZ6N1D2ejxpQMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/Le/d7rPjvMiDHcAAAAASUVORK5CYII=",height:"120px",width:"150px",style:{objectFit:"cover"}}),Object(C.jsx)("div",{className:"header",style:{margin:"15px 0px"},children:"Freedom Pharmacy"}),Object(C.jsxs)("div",{className:"loginCtr",children:[Object(C.jsx)(T.a,{name:"username",variant:"standard",label:"Username",helperText:a._cp?"":"Incorrect Username Or Password",error:!a._cp,onChange:function(e){c(Object(g.a)(Object(g.a)({},a),{},{username:e.target.value}))},fullWidth:!0,required:!0,style:{width:"250px",display:"block",margin:"15px 0px"}}),Object(C.jsx)(T.a,{type:"password",name:"password",variant:"standard",helperText:a._cp?"":"Incorrect Username Or Password",label:"Password",required:!0,error:!a._cp,onChange:function(e){c(Object(g.a)(Object(g.a)({},a),{},{password:e.target.value}))},fullWidth:!0,style:{display:"block",margin:"50px 0px"}})]}),Object(C.jsx)("div",{className:"submitCtr",children:Object(C.jsxs)(f.a,{fullWidth:!0,variant:"contained",color:"primary",style:{marginRight:10},onClick:u,children:["Login",Object(C.jsx)("span",{style:{fontSize:"17.5px",marginLeft:"10px"},children:Object(C.jsx)("i",{className:"las la-sign-in-alt"})})]})}),Object(C.jsxs)("div",{className:"loader",style:i?{display:"flex"}:{display:"none"},children:[Object(C.jsx)(q.a,{size:25}),Object(C.jsx)("div",{children:h})]})]}),Object(C.jsx)("img",{src:R,className:"img",alt:"Hospital"})]})};function M(){sessionStorage.removeItem("token"),window.location.replace("/")}var X=function(){var e=Object(s.useState)(null),t=Object(A.a)(e,2),a=t[0],n=t[1],r=c.a.useState(!1),i=Object(A.a)(r,2),l=i[0],d=i[1],j=function(){n(null)},o=function(){d(!1)};return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("header",{children:[Object(C.jsxs)("h2",{children:[Object(C.jsx)("label",{htmlFor:"nav-toggle",children:Object(C.jsx)("span",{className:"las la-bars"})}),Object(C.jsx)("span",{className:"health_unit_name",children:"Freedom Health"})]}),Object(C.jsxs)("div",{className:"search-wrapper",children:[Object(C.jsx)("span",{className:"las la-search"}),Object(C.jsx)("input",{type:"search",name:"",id:"",placeholder:"Search here"})]}),Object(C.jsxs)("div",{className:"",style:{display:"flex",alignItems:"center"},children:[Object(C.jsx)("div",{className:"",style:{fontSize:"42px",marginRight:20},children:Object(C.jsx)("i",{className:"las la-bell"})}),Object(C.jsxs)("div",{className:"user-wrapper","aria-controls":"reception-actions","aria-haspopup":"true",onClick:function(e){n(e.currentTarget)},style:{cursor:"pointer"},children:[Object(C.jsx)("img",{src:U,alt:"",width:"40px",height:"40px"}),Object(C.jsxs)("div",{className:"",children:[Object(C.jsx)("h4",{children:u.user.username}),Object(C.jsx)("small",{children:u.user.user_role})]})]})]})]}),Object(C.jsxs)(y.a,{id:"reception-actions",anchorEl:a,keepMounted:!0,disableScrollLock:!0,open:Boolean(a),onClose:j,children:[Object(C.jsxs)(_.a,{onClick:j,children:[Object(C.jsx)("span",{style:{fontSize:24,marginRight:10},children:Object(C.jsx)("i",{className:"las la-user-alt"})}),"Profile"]}),Object(C.jsxs)(_.a,{onClick:function(){d(!0)},children:[Object(C.jsx)("span",{style:{fontSize:24,marginRight:10},children:Object(C.jsx)("i",{className:"las la-sign-out-alt"})}),"Log out"]})]}),Object(C.jsxs)(S.a,{open:l,onClose:o,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(C.jsx)(w.a,{id:"alert-dialog-title",children:"Log Out"}),Object(C.jsx)(N.a,{children:Object(C.jsx)(D.a,{id:"alert-dialog-description",children:"Want to Log Out. Click 'Stay' to close, Log Out to Continue"})}),Object(C.jsxs)(k.a,{children:[Object(C.jsx)(f.a,{onClick:o,color:"primary",children:"Stay"}),Object(C.jsx)(f.a,{variant:"contained",color:"primary",autoFocus:!0,onClick:function(){M()},children:"Log Out"})]})]})]})},V=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).expiry_products=Object(v.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.data("/user/all/batch/expiry");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:(t=e.t0)&&s.setState(Object(g.a)(Object(g.a)({},s.state),{},{expiry_products:"Error"!==t?t:[]}));case 7:case"end":return e.stop()}}),e)}))),s.handleSaleClose=function(){s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open_sale:!1}))},s.handleOpenActions=function(e){s.setState(Object(g.a)(Object(g.a)({},s.state),{},{AnchorEl:e.currentTarget}))},s.handleOpenActionsDrugs=function(e){s.setState(Object(g.a)(Object(g.a)({},s.state),{},{AnchorElDrugs:e.currentTarget}))},s.handleCloseActions=function(){s.setState(Object(g.a)(Object(g.a)({},s.state),{},{AnchorEl:null}))},s.handleCloseActionsDrugs=function(){s.setState(Object(g.a)(Object(g.a)({},s.state),{},{AnchorElDrugs:null}))},s.state={AnchorEl:null,AnchorElDrugs:null,products:[],purchase_number:"...",sales_number:"...",expiry_products:[],my_sales:[],open_sale:!1},s.products(),s.purchases(),s.sales(),s.expiry_products(),s.my_sales(),s}return Object(l.a)(a,[{key:"my_sales",value:function(){var e=Object(v.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.data("/user/all/my_sales/".concat(u.user.username));case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:(t=e.t0)&&this.setState(Object(g.a)(Object(g.a)({},this.state),{},{my_sales:"Error"!==t?t:[]}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"products",value:function(){var e=Object(v.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.data("/user/all/products");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:(t=e.t0)&&this.setState(Object(g.a)(Object(g.a)({},this.state),{},{products:t}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"purchases",value:function(){var e=Object(v.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.data("/user/all/purchases");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:(t=e.t0)&&this.setState(Object(g.a)(Object(g.a)({},this.state),{},{purchase_number:t.length}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sales",value:function(){var e=Object(v.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.data("/user/all/sales");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:(t=e.t0)&&this.setState(Object(g.a)(Object(g.a)({},this.state),{},{sales_number:t.length}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("input",{type:"checkbox",id:"nav-toggle",defaultChecked:!0}),Object(C.jsx)(P,{active:"dashboard"}),Object(C.jsxs)("div",{className:"main-content",children:[Object(C.jsx)(X,{}),Object(C.jsxs)("main",{children:[Object(C.jsxs)("div",{className:"cards",children:[Object(C.jsxs)("div",{className:"card-single",children:[Object(C.jsxs)("div",{className:"",children:[Object(C.jsx)("h1",{children:this.state.my_sales.length}),Object(C.jsx)("span",{children:"My Sales"})]}),Object(C.jsx)("div",{className:"",children:Object(C.jsx)("span",{className:"las la-users",children:" "})})]}),Object(C.jsxs)("div",{className:"card-single",children:[Object(C.jsxs)("div",{className:"",children:[Object(C.jsx)("h1",{children:this.state.sales_number}),Object(C.jsx)("span",{children:"Sales"})]}),Object(C.jsx)("div",{className:"",children:Object(C.jsx)("span",{className:"las la-users"})})]}),Object(C.jsxs)("div",{className:"card-single",children:[Object(C.jsxs)("div",{className:"",children:[Object(C.jsx)("h1",{children:this.state.purchase_number}),Object(C.jsx)("span",{children:"Purchases"})]}),Object(C.jsx)("div",{className:"",children:Object(C.jsx)("span",{className:"las la-users",children:" "})})]}),Object(C.jsxs)("div",{className:"card-single",children:[Object(C.jsxs)("div",{className:"",children:[Object(C.jsx)("h1",{children:this.state.products.length}),Object(C.jsx)("span",{children:"Total Products"})]}),Object(C.jsx)("div",{className:"",children:Object(C.jsx)("span",{className:"las la-users",children:" "})})]})]}),Object(C.jsxs)("div",{className:"recent-grid",children:[Object(C.jsx)("div",{className:"projects",children:Object(C.jsxs)("div",{className:"card",children:[Object(C.jsxs)("div",{className:"card-header",children:[Object(C.jsx)("h3",{children:"Expiring in 90 days"}),Object(C.jsxs)(f.a,{variant:"contained",color:"primary","aria-controls":"drug-actions","aria-haspopup":"true",onClick:this.handleOpenActionsDrugs,children:["Menu",Object(C.jsx)("span",{style:{fontSize:"17.5px",marginLeft:"10px"},children:Object(C.jsx)("span",{className:"las la-angle-down"})})]}),Object(C.jsx)(y.a,{id:"drug-actions",anchorEl:this.state.AnchorElDrugs,keepMounted:!0,open:Boolean(this.state.AnchorElDrugs),onClose:this.handleCloseActionsDrugs,disableScrollLock:!0,children:Object(C.jsx)(O.b,{to:"/new-product",children:Object(C.jsx)(_.a,{onClick:this.handleCloseActionsDrugs,children:"New Product"})})})]}),Object(C.jsx)("div",{className:"card-body",children:Object(C.jsxs)("table",{width:"100%",children:[Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:"Name"}),Object(C.jsx)("td",{children:"Batch No."}),Object(C.jsx)("td",{children:"Quantity In Batch"}),Object(C.jsx)("td",{children:"Expires On"})]})}),Object(C.jsx)("tbody",{children:0===this.state.expiry_products.length?Object(C.jsx)("tr",{children:Object(C.jsx)("td",{children:"No Medicine Expires In 90 days"})}):this.state.expiry_products.map((function(e,t){return Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{className:"name_cell",children:e.product_generic_name}),Object(C.jsx)("td",{children:e.batch_no}),Object(C.jsx)("td",{children:e.batch_qty}),Object(C.jsx)("td",{children:e.batch_expiry_date})]},t)}))})]})})]})}),Object(C.jsx)("div",{className:"projects",children:Object(C.jsxs)("div",{className:"card",children:[Object(C.jsxs)("div",{className:"card-header",children:[Object(C.jsx)("h3",{children:"My Sales"}),Object(C.jsxs)(f.a,{variant:"contained",color:"primary","aria-controls":"reception-actions","aria-haspopup":"true",onClick:this.handleOpenActions,children:["See All",Object(C.jsx)("span",{style:{fontSize:"17.5px",marginLeft:"10px"},children:Object(C.jsx)("span",{className:"las la-angle-down"})})]})]}),Object(C.jsx)("div",{className:"card-body",children:Object(C.jsxs)("table",{width:"100%",children:[Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:"Total"}),Object(C.jsx)("td",{children:"Discont"}),Object(C.jsx)("td",{children:"Paid"}),Object(C.jsx)("td",{})]})}),Object(C.jsx)("tbody",{children:0===this.state.my_sales.length?Object(C.jsx)("tr",{children:Object(C.jsx)("td",{children:"No sale made"})}):this.state.my_sales.map((function(t,a){return Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:t.sales_amount}),Object(C.jsx)("td",{children:t.sales_discount}),Object(C.jsx)("td",{children:t.amount_paid}),Object(C.jsx)("td",{children:Object(C.jsx)(f.a,{variant:"contained",color:"primary",onClick:function(a){e.setState(Object(g.a)(Object(g.a)({},e.state),{},{open_sale:!0,dialog_data:t}))},children:"Details"})})]},a)}))})]})})]})})]})]})]}),this.state.dialog_data?Object(C.jsxs)(S.a,{open:this.state.open_sale,onClose:this.handleSaleClose,"aria-labelledby":"form-dialog-title",children:[Object(C.jsx)(w.a,{id:"form-dialog-title",children:"Sale Details"}),Object(C.jsx)(N.a,{children:Object(C.jsxs)(D.a,{children:[Object(C.jsxs)("table",{width:"100%",children:[Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:"Product"}),Object(C.jsx)("td",{children:"Qty"}),Object(C.jsx)("td",{children:"Selling Unit"}),Object(C.jsx)("td",{children:"Amount"}),Object(C.jsx)("td",{children:"Sale Type"})]})}),Object(C.jsx)("tbody",{children:JSON.parse(this.state.dialog_data.products_sold).map((function(e,t){return Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:e.product_name}),Object(C.jsx)("td",{children:e.qty}),Object(C.jsx)("td",{children:e.selling_unit}),Object(C.jsx)("td",{children:e.product_price}),Object(C.jsx)("td",{children:e.sale_type})]},t)})}))})]}),Object(C.jsx)("hr",{}),Object(C.jsx)("div",{className:"",children:Object(C.jsxs)("table",{children:[Object(C.jsx)("tr",{children:Object(C.jsx)("td",{children:"Total Amount: UGX ".concat(this.state.dialog_data.sales_amount)})}),Object(C.jsx)("tr",{children:Object(C.jsx)("td",{children:"Discount: UGX  ".concat(this.state.dialog_data.sales_discount)})}),Object(C.jsx)("tr",{children:Object(C.jsx)("td",{children:"Amount Paid: UGX ".concat(this.state.dialog_data.amount_paid)})})]})})]})}),Object(C.jsx)(k.a,{children:Object(C.jsx)(f.a,{onClick:this.handleSaleClose,color:"primary",children:"Cancel"})})]}):Object(C.jsx)(C.Fragment,{})]})}}]),a}(s.Component),Q=a(22),J=a(210),L=a(200),B=a(190),H=a(213),K=a(205),G=a(201),Y=a(202),Z=a(208),$=a(207),ee=function(){function e(){Object(i.a)(this,e)}return Object(l.a)(e,[{key:"post",value:function(){var e=Object(v.a)(m.a.mark((function e(t,a){var s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.a.post("".concat("http://localhost:5000/api").concat(t),a);case 3:return s=e.sent,e.abrupt("return",s.data);case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return","Error");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}()}]),e}(),te=a(204),ae=a(36),se=a.n(ae),ce=(a(152),function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={formData:s.props.data},s}return Object(l.a)(a,[{key:"getDate",value:function(){return new Date(Date.now()).getDate()+" / "+(new Date(Date.now()).getMonth()+1)+" / "+new Date(Date.now()).getFullYear()}},{key:"getTotals",value:function(){var e=0;return 0!==this.state.formData.length&&this.state.formData.forEach((function(t){e+=parseInt(t.product_price)*parseInt(t.qty)})),e}},{key:"render",value:function(){return Object(C.jsx)(C.Fragment,{children:Object(C.jsx)("div",{className:"print-ctr",children:Object(C.jsxs)("div",{className:"print",children:[Object(C.jsxs)("div",{className:"print-pharmacy",children:[Object(C.jsx)("span",{children:" Freedom Pharmacy"}),Object(C.jsx)("span",{children:"Apac Municipality"}),Object(C.jsx)("span",{children:"Tel: 0772 344266"})]}),Object(C.jsx)("div",{className:"print-title",children:"Sales Receipt"}),Object(C.jsxs)("div",{className:"date",children:["Date:",this.getDate()]}),Object(C.jsx)("div",{className:"content",children:Object(C.jsxs)("table",{children:[Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:"Name"}),Object(C.jsx)("td",{children:"Qty"}),Object(C.jsx)("td",{children:"Unit Price(Shs)"}),Object(C.jsx)("td",{children:"Total(Shs)"})]})}),Object(C.jsx)("tbody",{children:0===this.state.formData.length?Object(C.jsx)("tr",{children:Object(C.jsx)("td",{children:"No Content To Print"})}):this.state.formData.map((function(e,t){return Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:e.product_name}),Object(C.jsx)("td",{children:e.qty}),Object(C.jsx)("td",{children:e.product_price}),Object(C.jsx)("td",{children:parseInt(e.product_price)*parseInt(e.qty)})]},t)}))}),Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{}),Object(C.jsx)("td",{}),Object(C.jsx)("td",{children:"Total"}),Object(C.jsx)("td",{children:this.getTotals()})]})})]})}),Object(C.jsxs)("div",{className:"attendant",children:["Served By: ",u.user.username]})]})})})}}]),a}(s.Component));a(61),a(41);function ne(e){return Object(C.jsx)($.a,Object(g.a)({elevation:6,variant:"filled"},e))}var re=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).handleSale=function(){var e=Object(v.a)(m.a.mark((function e(t){var a,c,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(s.state.batch_index),s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!0,messageState:"info"})),a=new FormData(t.target),c={},a.forEach((function(e,t){c[t]=e})),e.next=8,s.setState(Object(g.a)(Object(g.a)({},s.state),{},{_content:c}));case 8:return 0!==s.state.formData.length&&s.setState(Object(g.a)(Object(g.a)({},s.state),{},{_content:Object(g.a)(Object(g.a)({},s.state._content),{},{products_sold:s.state.formData,date:Date.now(),user:u.user.username})})),n=new ee,e.next=12,n.post("/user/sale/new_sale",s.state._content);case 12:!0===(r=e.sent).status?(s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!0,message:r.data,messageState:"success"})),setTimeout((function(){window.location.reload()}),500)):s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!0,message:r.data,messageState:"error"}));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.handleSubmit=function(){var e=Object(v.a)(m.a.mark((function e(t){var a,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!s.state.over_qty_error){e.next=4;break}return s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!0,messageState:"error",message:"Quantity Exceeds Available"})),e.abrupt("return");case 4:if(s.state.active_drug){e.next=7;break}return s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!0,messageState:"error",message:"No Selling Unit"})),e.abrupt("return");case 7:s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!0,messageState:"info"})),a=new FormData(t.target),c={},a.forEach((function(e,t){c[t]=e})),c.batch=s.state.batch?s.state.batch:[],s.state.formData.find((function(e){return e.product_name===c.product_name}))?s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!0,message:"Product Exists",messageState:"warning"})):s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!0,message:"Product Added",messageState:"success",formData:[].concat(Object(Q.a)(s.state.formData),[c]),print:!0,active_drug:null}));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.handleDrugNameKeyUp=function(){var e=Object(v.a)(m.a.mark((function e(t,a){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.target.value){e.next=9;break}return e.next=3,W.data("/user/sale/products/".concat(t.target.value));case 3:if(e.t1=e.sent,e.t1){e.next=6;break}e.t1=[];case 6:e.t0=e.t1,e.next=10;break;case 9:e.t0=[];case 10:(c=e.t0)&&s.setState(Object(g.a)(Object(g.a)({},s.state),{},{products:"Error"===c?[]:c}));case 12:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),s.handleChangeDrugName=function(e,t){t&&s.setState(Object(g.a)(Object(g.a)({},s.state),{},{active_drug:t}),(function(){s.setState(Object(g.a)(Object(g.a)({},s.state),{},{active_selling_unit:JSON.parse(s.state.active_drug.product_units)[0].selling_unit,active_selling_price:JSON.parse(s.state.active_drug.product_units)[0][s.state.active_sale_type]}),(function(){s.setState(Object(g.a)(Object(g.a)({},s.state),{},{active_product_qty:s.state.active_selling_unit===JSON.parse(s.state.active_drug.product_units)[0].selling_unit?parseInt(s.state.active_drug.product_qty):parseInt(s.state.active_drug.product_qty)/parseInt(JSON.parse(s.state.active_drug.product_units).find((function(t){return t.selling_unit===e.target.value})).qty)}))}))}))},s.closePopUp=function(e,t){"clickaway"!==t&&s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!1,message:""}))},s.state={open:!1,message:"Please Wait...",messageState:"",_content:{},form_visible:!1,active_product_qty:0,over_qty_error:!1,active_sale_type:"retail",active_selling_unit:"",active_selling_price:"",products:[],formData:[],total:0,discount:0,batch_index:1},s}return Object(l.a)(a,[{key:"getTotals",value:function(){var e=0;return 0!==this.state.formData.length&&this.state.formData.forEach((function(t){e+=parseInt(t.product_price)*parseInt(t.qty)})),e}},{key:"render",value:function(){var e=this;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(J.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.open,autoHideDuration:5e3,onClose:this.closePopUp,action:Object(C.jsx)(c.a.Fragment,{children:Object(C.jsx)(L.a,{size:"small","aria-label":"close",color:"inherit",onClick:this.closePopUp,children:Object(C.jsx)("i",{className:"las la-times"})})}),children:Object(C.jsx)(ne,{onClose:this.closePopUp,severity:this.state.messageState,children:this.state.message})}),Object(C.jsx)("input",{type:"checkbox",id:"nav-toggle",defaultChecked:!0}),Object(C.jsx)(P,{active:"sale"}),Object(C.jsxs)("div",{className:"main-content",children:[Object(C.jsx)(X,{}),Object(C.jsx)("main",{children:Object(C.jsxs)("div",{className:"recent-grid",children:[Object(C.jsxs)("div",{className:"card",children:[Object(C.jsxs)("div",{className:"card-header",children:[Object(C.jsx)("h3",{children:"Sale List"}),Object(C.jsxs)(f.a,{"aria-describedby":this.id,variant:"contained",color:"primary",onClick:function(){window.location.reload()},style:{fontSize:"17.5px",marginRight:"15px"},children:[Object(C.jsx)("span",{style:{fontSize:"17.5px",marginRight:"10px"},children:Object(C.jsx)("i",{className:"las la-redo"})}),"Cancel"]})]}),Object(C.jsx)("div",{className:"card-body",children:Object(C.jsxs)("table",{width:"100%",children:[Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:"Name"}),Object(C.jsx)("td",{children:"Qty"}),Object(C.jsx)("td",{children:"Unit Price(Shs)"}),Object(C.jsx)("td",{children:"Total(Shs)"}),Object(C.jsx)("td",{})]})}),Object(C.jsx)("tbody",{children:0===this.state.formData.length?Object(C.jsx)("tr",{children:Object(C.jsx)("td",{children:"No Product Added"})}):this.state.formData.map((function(t,a){return Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{className:"name_cell",children:t.product_name}),Object(C.jsx)("td",{children:t.qty}),Object(C.jsx)("td",{children:t.product_price}),Object(C.jsx)("td",{children:parseInt(t.product_price)*parseInt(t.qty)}),Object(C.jsx)("td",{children:Object(C.jsx)(f.a,{variant:"contained",color:"primary",onClick:function(){var t=e.state.formData;t.splice(a,1),e.setState(Object(g.a)(Object(g.a)({},e.state),{},{formData:t}))},children:"Remove"})})]},a)}))}),Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{}),Object(C.jsx)("td",{}),Object(C.jsx)("td",{children:"Total"}),Object(C.jsx)("td",{children:this.getTotals()})]})})]})})]}),Object(C.jsxs)("div",{className:"projects",children:[Object(C.jsxs)("form",{className:"card",autoComplete:"off",onSubmit:this.handleSubmit,children:[Object(C.jsxs)("div",{className:"card-header card-header-payments",children:[Object(C.jsx)("div",{children:Object(C.jsxs)(B.a,{variant:"outlined",label:"selling_unit",style:{width:"85%",marginInline:"20px"},children:[Object(C.jsx)(H.a,{id:"sale_type",children:"Sale"}),Object(C.jsxs)(K.a,{inputProps:{name:"sale_type"},label:"Sale",id:"select_sale_type",value:this.state.active_sale_type,onChange:function(t,a){e.setState(Object(g.a)(Object(g.a)({},e.state),{},{active_sale_type:t.target.value,active_drug:null}))},children:[Object(C.jsx)(_.a,{value:"retail",children:"Retail"}),Object(C.jsx)(_.a,{value:"wholesale",children:"Wholesale"})]})]})}),Object(C.jsx)("div",{className:"",children:Object(C.jsxs)(f.a,{type:"submit","aria-describedby":this.id,variant:"contained",color:"primary",children:[Object(C.jsx)("span",{style:{fontSize:"17.5px",marginRight:"10px"},children:Object(C.jsx)("i",{className:"las la-plus-circle"})}),"Add"]})})]}),Object(C.jsx)("div",{className:"card-body",children:Object(C.jsx)("div",{children:Object(C.jsxs)("div",{className:"inputCtr",children:[Object(C.jsx)("h4",{children:"Product Details"}),Object(C.jsxs)("div",{className:"inputs_ctr",children:[Object(C.jsxs)("div",{className:"inpts_on_left",children:[Object(C.jsx)(te.a,{id:"combo-box-demo",options:this.state.products,getOptionLabel:function(e){return"".concat(e.product_generic_name," ").concat(e.product_description_name)},onChange:this.handleChangeDrugName,onKeyUp:this.handleDrugNameKeyUp,style:{width:"85%",margin:"20px"},renderInput:function(e){return Object(C.jsx)(T.a,Object(g.a)(Object(g.a)({},e),{},{label:"Search Product",name:"product_name",variant:"outlined"}))}}),Object(C.jsx)(T.a,{disabled:!this.state.active_drug,type:"number",name:"qty_available",variant:"outlined",label:"Available",value:this.state.active_product_qty,style:{width:"85%",margin:"20px"}})]}),Object(C.jsxs)("div",{className:"inpts_on_right",children:[Object(C.jsxs)(B.a,{variant:"outlined",label:"selling_unit",disabled:!this.state.active_drug,style:{width:"85%",margin:"20px"},children:[Object(C.jsx)(H.a,{id:"selling_unit",children:"Selling Unit"}),Object(C.jsx)(K.a,{inputProps:{name:"selling_unit"},label:"Selling Unit",id:"select_selling_unit",value:this.state.active_selling_unit,onChange:function(){var t=Object(v.a)(m.a.mark((function t(a,s){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState(Object(g.a)(Object(g.a)({},e.state),{},{active_selling_price:JSON.parse(e.state.active_drug.product_units).find((function(e){return e.selling_unit===a.target.value}))[e.state.active_sale_type]}));case 2:e.setState(Object(g.a)(Object(g.a)({},e.state),{},{active_selling_unit:a.target.value}),(function(){e.setState(Object(g.a)(Object(g.a)({},e.state),{},{active_product_qty:e.state.active_selling_unit===JSON.parse(e.state.active_drug.product_units)[0].selling_unit?parseInt(e.state.active_drug.product_qty):parseInt(e.state.active_drug.product_qty)/parseInt(JSON.parse(e.state.active_drug.product_units).find((function(e){return e.selling_unit===a.target.value})).qty)}))}));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),children:this.state.active_drug?JSON.parse(this.state.active_drug.product_units).map((function(e,t){return Object(C.jsx)(_.a,{value:e.selling_unit,children:e.selling_unit},t)})):Object(C.jsx)(_.a,{value:"",children:"No Selling Units"})})]}),Object(C.jsx)(T.a,{disabled:!this.state.active_drug,error:this.state.over_qty_error,type:"number",name:"qty",variant:"outlined",label:"Quantity",helperText:this.state.over_qty_error?"Quantity Exceeds Available":"",defaultValue:1,onChange:function(){var t=Object(v.a)(m.a.mark((function t(a){var s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(parseInt(a.target.value)>e.state.active_product_qty)){t.next=4;break}e.setState(Object(g.a)(Object(g.a)({},e.state),{},{over_qty_error:!0})),t.next=11;break;case 4:return t.next=6,W.data("/user/sale/batch/".concat(e.state.active_drug.product_id,"/",1));case 6:if("Error"===(s=t.sent)||0===s.length){t.next=10;break}return t.next=10,e.setState(Object(g.a)(Object(g.a)({},e.state),{},{batch_qty:parseInt(s[0].sum)}),Object(v.a)(m.a.mark((function t(){var s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(parseInt(a.target.value)>=e.state.batch_qty)){t.next=5;break}return t.next=3,W.data("/user/sale/batch/".concat(e.state.active_drug.product_id,"/").concat(e.state.batch_index+1));case 3:"Error"!==(s=t.sent)&&0!==s.length&&e.setState(Object(g.a)(Object(g.a)({},e.state),{},{batch_index:e.state.batch_index+1,batch_qty:parseInt(s[s.length-1].sum)}));case 5:case"end":return t.stop()}}),t)}))));case 10:e.setState(Object(g.a)(Object(g.a)({},e.state),{},{over_qty_error:!1}));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),style:{width:"85%",margin:"20px"}}),Object(C.jsx)("input",{hidden:!0,type:"text",name:"product_id",defaultValue:this.state.active_drug?this.state.active_drug.product_id:""}),Object(C.jsx)("input",{hidden:!0,type:"text",name:"product_price",defaultValue:this.state.active_selling_price}),Object(C.jsx)("input",{hidden:!0,type:"text",name:"product_batch_index",value:this.state.batch_index,readOnly:!0})]})]})]})})})]}),Object(C.jsxs)("form",{className:"card",style:{marginTop:"20px"},onSubmit:this.handleSale,children:[Object(C.jsxs)("div",{className:"card-header card-header-payments",children:[Object(C.jsx)("h3",{className:"class_payment_header",children:"Payment"}),Object(C.jsxs)("div",{className:"",children:[Object(C.jsx)(se.a,{trigger:function(){return Object(C.jsxs)(f.a,{variant:"contained",color:"primary",style:{marginRight:10},children:[Object(C.jsx)("span",{style:{fontSize:"17.5px",marginRight:"10px"},children:Object(C.jsx)("i",{className:"las la-print"})}),"Print"]})},content:function(){return e.componentRef}}),Object(C.jsxs)(f.a,{type:"submit",variant:"contained",color:"primary",children:["Finish Sale",Object(C.jsx)("span",{style:{fontSize:"15px",marginLeft:"10px"},children:Object(C.jsx)("i",{className:"las la-angle-double-right"})})]})]})]}),Object(C.jsx)(ie,{t:this.getTotals()})]})]})]})})]}),Object(C.jsx)("div",{style:{display:"none"},children:this.state.print?Object(C.jsx)(ce,{ref:function(t){return e.componentRef=t},data:this.state.formData}):Object(C.jsx)(C.Fragment,{})})]})}}]),a}(s.Component);function ie(e){var t=e.t,a=Object(s.useState)(0),c=Object(A.a)(a,2),n=c[0],r=c[1];return Object(C.jsxs)("div",{className:"_finish_purchase_ctr",children:[Object(C.jsx)(T.a,{name:"total_amount",variant:"outlined",label:"Total",value:t,style:{width:"75%",margin:"20px"}}),Object(C.jsx)(T.a,{name:"discount",variant:"outlined",label:"Discount",type:"number",onChange:function(e){r(parseInt(e.target.value)||0)},style:{width:"75%",margin:"20px"}}),Object(C.jsx)(T.a,{name:"pay_amount",variant:"outlined",label:"Amount to Be Paid",value:t-n,style:{width:"75%",margin:"20px"}}),Object(C.jsx)(B.a,{style:{width:"75%",marginLeft:"20px",marginBottom:"50px"},children:Object(C.jsx)(G.a,{children:Object(C.jsx)(Y.a,{control:Object(C.jsx)(Z.a,{defaultChecked:!0,name:"print_receipt"}),label:"Print Receipt"})})})]})}var le=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={products:[]},s.products(),s}return Object(l.a)(a,[{key:"products",value:function(){var e=Object(v.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.data("/user/all/products");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:(t=e.t0)&&this.setState(Object(g.a)(Object(g.a)({},this.state),{},{products:"Error"===t?[]:t}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("input",{type:"checkbox",id:"nav-toggle",defaultChecked:!0}),Object(C.jsx)(P,{active:"dashboard"}),Object(C.jsxs)("div",{className:"main-content",children:[Object(C.jsx)(X,{}),Object(C.jsx)("main",{children:Object(C.jsx)("div",{className:"fullwidth-ctr",children:Object(C.jsx)("div",{className:"projects",children:Object(C.jsxs)("div",{className:"card",children:[Object(C.jsxs)("div",{className:"card-header",children:[Object(C.jsx)("h3",{children:"Products Available"}),Object(C.jsx)(T.a,{name:"drug_name",variant:"outlined",label:"Search Product",style:{width:"15%"}})]}),Object(C.jsx)("div",{className:"card-body",children:Object(C.jsxs)("table",{width:"100%",children:[Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:"Product Name"}),Object(C.jsx)("td",{children:"Expiry Date"}),Object(C.jsx)("td",{children:"Quantity"}),Object(C.jsx)("td",{})]})}),Object(C.jsx)("tbody",{children:0===this.state.products.length?Object(C.jsx)("tr",{children:Object(C.jsx)("td",{children:"No Product Exists"})}):this.state.products.map((function(e,t){return Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:e.product_name}),Object(C.jsx)("td",{children:e.expiry_date}),Object(C.jsx)("td",{children:e.quantity}),Object(C.jsx)("td",{children:Object(C.jsx)(O.b,{to:"/product?product-id=".concat(e.product_id),children:Object(C.jsx)(f.a,{variant:"contained",color:"primary",children:"Details"})})})]},t)})}))})]})})]})})})})]})]})}}]),a}(s.Component);function de(e){return Object(C.jsx)($.a,Object(g.a)({elevation:6,variant:"filled"},e))}var je=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).handlePurchase=function(){var e=Object(v.a)(m.a.mark((function e(t){var a,c,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!0,messageState:"info"})),a=new FormData(t.target),c={},a.forEach((function(e,t){c[t]=e})),e.next=7,s.setState(Object(g.a)(Object(g.a)({},s.state),{},{_content:c}));case 7:return 0!==s.state.formData.length&&s.setState(Object(g.a)(Object(g.a)({},s.state),{},{_content:Object(g.a)(Object(g.a)({},s.state._content),{},{products_purchased:s.state.formData,date:Date.now()})})),n=new ee,e.next=11,n.post("/user/sale/new_purchase",s.state._content);case 11:!0===(r=e.sent).status?(s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!0,message:r.data,messageState:"success"})),setTimeout((function(){window.location.reload()}),500)):s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!0,message:r.data,messageState:"error"}));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.handleSubmit=function(){var e=Object(v.a)(m.a.mark((function e(t){var a,c,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!0,messageState:"info"})),a=new FormData(t.target),c={},a.forEach((function(e,t){c[t]=e})),n=s.state.formData.find((function(e){return e.product_name===c.product_name})),c.batch_no&&c.expiry_date&&c.qty&&c.cost_price){e.next=9;break}return s.setState(Object(g.a)(Object(g.a)({},s.state),{},{empty_error:!0,open:!0,messageState:"error",message:"Some Fields are missing"})),e.abrupt("return");case 9:n?s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!0,message:"Product Exists",messageState:"warning"})):s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!0,message:"Product Added",messageState:"success",formData:[].concat(Object(Q.a)(s.state.formData),[c])}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.handleDrugNameKeyUp=function(){var e=Object(v.a)(m.a.mark((function e(t,a){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.target.value){e.next=9;break}return e.next=3,W.data("/user/sale/products/".concat(t.target.value));case 3:if(e.t1=e.sent,e.t1){e.next=6;break}e.t1=[];case 6:e.t0=e.t1,e.next=10;break;case 9:e.t0=[];case 10:(c=e.t0)&&s.setState(Object(g.a)(Object(g.a)({},s.state),{},{products:"Error"===c?[]:c}));case 12:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),s.handleChangeDrugName=function(e,t){t&&s.setState(Object(g.a)(Object(g.a)({},s.state),{},{active_drug:t}),(function(){var e=JSON.parse(s.state.active_drug.product_units);s.setState(Object(g.a)(Object(g.a)({},s.state),{},{active_selling_unit:e[e.length-1].selling_unit,active_retail_price:e[e.length-1].retail,active_wholesale_price:e[e.length-1].wholesale}))}))},s.closePopUp=function(e,t){"clickaway"!==t&&(s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!1,message:""})),s.state.empty_error&&s.setState(Object(g.a)(Object(g.a)({},s.state),{},{empty_error:!1})))},s.state={open:!1,message:"Please Wait...",messageState:"",_content:{},active_selling_unit:"",active_wholesale_price:"",empty_error:!1,products:[],suppliers:[],formData:[],total:0,discount:0},s.suppliers(),s}return Object(l.a)(a,[{key:"suppliers",value:function(){var e=Object(v.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.data("/user/all/suppliers");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:(t=e.t0)&&this.setState(Object(g.a)(Object(g.a)({},this.state),{},{suppliers:"Error"===t?[]:t}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getTotals",value:function(){var e=0;return 0!==this.state.formData.length&&this.state.formData.forEach((function(t){e+=parseInt(t.cost_price)})),e}},{key:"render",value:function(){var e=this;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(J.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.open,autoHideDuration:5e3,onClose:this.closePopUp,action:Object(C.jsx)(c.a.Fragment,{children:Object(C.jsx)(L.a,{size:"small","aria-label":"close",color:"inherit",onClick:this.closePopUp,children:Object(C.jsx)("i",{className:"las la-times"})})}),children:Object(C.jsx)(de,{onClose:this.closePopUp,severity:this.state.messageState,children:this.state.message})}),Object(C.jsx)("input",{type:"checkbox",id:"nav-toggle",defaultChecked:!0}),Object(C.jsx)(P,{active:"purchase"}),Object(C.jsxs)("div",{className:"main-content",children:[Object(C.jsx)(X,{}),Object(C.jsx)("main",{children:Object(C.jsxs)("div",{className:"recent-grid-left",children:[Object(C.jsxs)("div",{className:"card",children:[Object(C.jsxs)("div",{className:"card-header",children:[Object(C.jsx)("h3",{children:"Purchase List"}),Object(C.jsxs)(f.a,{variant:"contained",color:"primary",style:{marginRight:10},onClick:function(){window.location.reload()},children:[Object(C.jsx)("span",{style:{fontSize:"17.5px",marginRight:"10px"},children:Object(C.jsx)("i",{className:"las la-redo"})}),"Cancel"]})]}),Object(C.jsx)("div",{className:"card-body tbl_ctr",children:Object(C.jsxs)("table",{width:"100%",children:[Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:"Name"}),Object(C.jsx)("td",{children:"Qty"}),Object(C.jsx)("td",{children:"Batch No."}),Object(C.jsx)("td",{children:"Expiry Date"}),Object(C.jsx)("td",{children:"Cost Price(Shs)"})]})}),Object(C.jsx)("tbody",{children:0===this.state.formData.length?Object(C.jsx)("tr",{children:Object(C.jsx)("td",{children:"No Product Added"})}):this.state.formData.map((function(t,a){return Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{className:"name_cell",children:t.product_name}),Object(C.jsx)("td",{children:t.qty}),Object(C.jsx)("td",{children:t.batch_no}),Object(C.jsx)("td",{children:t.expiry_date}),Object(C.jsx)("td",{children:t.cost_price}),Object(C.jsx)("td",{children:Object(C.jsx)(f.a,{variant:"contained",color:"primary",onClick:function(){var t=e.state.formData;t.splice(a,1),e.setState(Object(g.a)(Object(g.a)({},e.state),{},{formData:t}))},children:"Remove"})})]},a)}))}),Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{}),Object(C.jsx)("td",{}),Object(C.jsx)("td",{}),Object(C.jsx)("td",{children:"Total"}),Object(C.jsx)("td",{children:this.getTotals()})]})})]})})]}),Object(C.jsxs)("div",{className:"projects",children:[Object(C.jsxs)("form",{className:"card",autoComplete:"off",onSubmit:this.handleSubmit,children:[Object(C.jsxs)("div",{className:"card-header card-header-payments",children:[Object(C.jsx)("h3",{className:"class_payment_header",children:"New Purchase"}),Object(C.jsx)("div",{className:"",children:Object(C.jsxs)(f.a,{type:"submit","aria-describedby":this.id,variant:"contained",color:"primary",children:[Object(C.jsx)("span",{style:{fontSize:"17.5px",marginRight:"10px"},children:Object(C.jsx)("i",{className:"las la-plus-circle"})}),"Add"]})})]}),Object(C.jsx)("div",{className:"card-body",children:Object(C.jsx)("div",{children:Object(C.jsxs)("div",{className:"inputCtr",children:[Object(C.jsx)("h4",{children:"Product Details"}),Object(C.jsxs)("div",{className:"inputs_ctr",children:[Object(C.jsxs)("div",{className:"inpts_on_left",children:[Object(C.jsx)(te.a,{id:"combo-box-demo",options:this.state.products,getOptionLabel:function(e){return"".concat(e.product_generic_name," ").concat(e.product_description_name)},onChange:this.handleChangeDrugName,onKeyUp:this.handleDrugNameKeyUp,style:{width:"85%",margin:"20px"},renderInput:function(e){return Object(C.jsx)(T.a,Object(g.a)(Object(g.a)({},e),{},{label:"Search Product",name:"product_name",variant:"outlined"}))}}),Object(C.jsx)(T.a,{error:this.state.empty_error,name:"batch_no",variant:"outlined",label:"Batch Number",style:{width:"85%",margin:"20px"}}),Object(C.jsx)(T.a,{error:this.state.empty_error,type:"date",name:"expiry_date",variant:"outlined",helperText:"Expiry Date",style:{width:"85%",margin:"20px"}}),Object(C.jsxs)(B.a,{variant:"outlined",label:"supplier",style:{width:"85%",margin:"20px"},children:[Object(C.jsx)(H.a,{id:"supplier",children:"Supplier"}),Object(C.jsx)(K.a,{inputProps:{name:"supplier"},label:"supplier",id:"select_supplier",defaultValue:"",children:0===this.state.suppliers.length?"No Supplier Added":this.state.suppliers.map((function(e,t){return Object(C.jsx)(_.a,{value:e.supplier_id,children:e.supplier_surname},t)}))})]})]}),Object(C.jsxs)("div",{className:"inpts_on_right",children:[Object(C.jsxs)(B.a,{variant:"outlined",label:"selling_unit",disabled:!this.state.active_drug,style:{width:"85%",margin:"20px"},children:[Object(C.jsx)(H.a,{id:"selling_unit",children:"Purchasing Unit"}),Object(C.jsx)(K.a,{inputProps:{name:"selling_unit"},label:"Purchasing Unit",id:"select_selling_unit",value:this.state.active_selling_unit,onChange:function(t,a){var s=JSON.parse(e.state.active_drug.product_units);e.setState(Object(g.a)(Object(g.a)({},e.state),{},{active_retail_price:s.find((function(e){return e.selling_unit===t.target.value})).retail,active_wholesale_price:s.find((function(e){return e.selling_unit===t.target.value})).wholesale})),e.setState(Object(g.a)(Object(g.a)({},e.state),{},{active_selling_unit:t.target.value}))},children:this.state.active_drug?JSON.parse(this.state.active_drug.product_units).map((function(e,t){return Object(C.jsx)(_.a,{value:e.selling_unit,children:e.selling_unit},t)})):Object(C.jsx)(_.a,{value:"",children:"No Selling Units"})})]}),Object(C.jsx)(T.a,{error:this.state.empty_error,type:"number",name:"qty",variant:"outlined",label:"Quantity",defaultValue:1,style:{width:"85%",margin:"20px"}}),Object(C.jsx)(T.a,{error:this.state.empty_error,name:"cost_price",variant:"outlined",type:"number",label:"Unit Cost Price(Ushs)",style:{width:"85%",margin:"20px"}}),Object(C.jsx)("input",{hidden:!0,type:"text",name:"product_id",defaultValue:this.state.active_drug?this.state.active_drug.product_id:""})]})]})]})})})]}),Object(C.jsxs)("form",{className:"card",style:{marginTop:"20px"},onSubmit:this.handlePurchase,children:[Object(C.jsxs)("div",{className:"card-header card-header-payments",children:[Object(C.jsx)("h3",{className:"class_payment_header",children:"Payment"}),Object(C.jsxs)("div",{className:"",children:[Object(C.jsx)(se.a,{trigger:function(){return Object(C.jsxs)(f.a,{variant:"contained",color:"primary",style:{marginRight:10},children:[Object(C.jsx)("span",{style:{fontSize:"17.5px",marginRight:"10px"},children:Object(C.jsx)("i",{className:"las la-print"})}),"Print"]})},content:function(){return e.componentRef}}),Object(C.jsxs)(f.a,{type:"submit",variant:"contained",color:"primary",children:["Finish Purchase",Object(C.jsx)("span",{style:{fontSize:"15px",marginLeft:"10px"},children:Object(C.jsx)("i",{className:"las la-angle-double-right"})})]})]})]}),Object(C.jsx)(oe,{t:this.getTotals()})]})]})]})})]}),Object(C.jsx)("div",{style:{display:"none"},children:Object(C.jsx)(ce,{ref:function(t){return e.componentRef=t},data:this.state.formData})})]})}}]),a}(s.Component);function oe(e){var t=e.t,a=Object(s.useState)(0),c=Object(A.a)(a,2),n=c[0],r=c[1];return Object(C.jsxs)("div",{className:"_finish_purchase_ctr",children:[Object(C.jsx)(T.a,{name:"total_amount",variant:"outlined",label:"Total",value:t,style:{width:"75%",margin:"20px"}}),Object(C.jsx)(T.a,{name:"discount",variant:"outlined",label:"Discount",type:"number",onChange:function(e){r(parseInt(e.target.value)||0)},style:{width:"75%",margin:"20px"}}),Object(C.jsx)(T.a,{name:"pay_amount",variant:"outlined",label:"Amount to Be Paid",value:t-n,style:{width:"75%",margin:"20px"}}),Object(C.jsx)(B.a,{style:{width:"75%",marginLeft:"20px",marginBottom:"50px"},children:Object(C.jsx)(G.a,{children:Object(C.jsx)(Y.a,{control:Object(C.jsx)(Z.a,{defaultChecked:!0,name:"print_receipt"}),label:"Print Receipt"})})})]})}function he(e){return Object(C.jsx)($.a,Object(g.a)({elevation:6,variant:"filled"},e))}var be=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={open:!1,message:"Please Wait...",messageState:"",product:{}},s.product(),s}return Object(l.a)(a,[{key:"product",value:function(){var e=Object(v.a)(m.a.mark((function e(){var t,a,s,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=parseInt(new URLSearchParams(window.location.search).get("product-id")),e.next=3,W.data("/user/all/product/".concat(t));case 3:a=e.sent,s=Object(A.a)(a,1),(c=s[0])&&this.setState(Object(g.a)(Object(g.a)({},this.state),{},{product:"Error"===c?{}:c}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(J.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.open,autoHideDuration:5e3,onClose:this.closePopUp,action:Object(C.jsx)(c.a.Fragment,{children:Object(C.jsx)(L.a,{size:"small","aria-label":"close",color:"inherit",onClick:this.closePopUp,children:Object(C.jsx)("i",{className:"las la-times"})})}),children:Object(C.jsx)(he,{onClose:this.closePopUp,severity:this.state.messageState,children:this.state.message})}),Object(C.jsx)("input",{type:"checkbox",id:"nav-toggle",defaultChecked:!0}),Object(C.jsx)(P,{active:"dashboard"}),Object(C.jsxs)("div",{className:"main-content",children:[Object(C.jsx)(X,{}),Object(C.jsx)("main",{children:Object(C.jsx)("div",{className:"fullwidth-ctr",children:Object(C.jsx)("div",{className:"projects",children:Object(C.jsxs)("div",{className:"card",children:[Object(C.jsx)("div",{className:"",style:{borderBottom:"1px solid #f0f0f0",padding:"1rem"},children:Object(C.jsxs)("div",{className:"form-header-ctr",children:[Object(C.jsx)("div",{className:"",children:Object(C.jsx)("h3",{children:"Product Details"})}),Object(C.jsx)("div",{className:"",children:Object(C.jsx)(f.a,{type:"submit","aria-describedby":this.id,variant:"contained",color:"primary",style:{marginInline:10},children:"Print"})})]})}),Object(C.jsx)("div",{className:"card-body",children:Object(C.jsx)("div",{children:Object(C.jsxs)("div",{className:"inputCtr",children:[Object(C.jsxs)("h3",{children:["Product No: ",this.state.product.product_track_number]}),Object(C.jsx)("div",{className:"inputs_ctr",children:Object(C.jsxs)("table",{width:"100%",children:[Object(C.jsxs)("tr",{children:[Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Product Name :"}),this.state.product.product_name]}),Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Quantity in Stock :"}),this.state.product.quantity]})]}),Object(C.jsxs)("tr",{children:[Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Unit Price :"}),"UGX","",this.state.product.unit_price]}),Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Cost Price :"}),"UGX"," ","",this.state.product.cost_price]})]}),Object(C.jsxs)("tr",{children:[Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Total Sales:"}),"0"]}),Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Income:"}),"UGX 0"]})]}),Object(C.jsxs)("tr",{children:[Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Total Purchases:"}),"0"]}),Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Expenses:"}),"UGX 0"]})]}),Object(C.jsxs)("tr",{children:[Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Date Added :"}),new Date(this.state.product.date_added).getDate()+"-"+(new Date(this.state.product.date_added).getMonth()+1)+"-"+new Date(this.state.product.date_added).getFullYear()]}),Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Time :"}),new Date(this.state.product.date_added).getHours()+":"+new Date(this.state.product.date_added).getMinutes()+(new Date(this.state.product.date_added).getHours()<12?"AM":"PM")]})]}),Object(C.jsxs)("tr",{children:[Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Expiry Date :"}),this.state.product.expiry_date]}),Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Description :"}),this.state.product.product_description]})]})]})}),Object(C.jsx)("h5",{children:"Supplier"}),Object(C.jsx)("div",{className:"inputs_ctr",children:Object(C.jsxs)("table",{width:"100%",children:[Object(C.jsxs)("tr",{children:[Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Surname :"}),this.state.product.supplier_surname]}),Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Lastname :"}),this.state.product.supplier_lastname]})]}),Object(C.jsxs)("tr",{children:[Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Date Added :"}),new Date(this.state.product.date_registered).getDate()+"-"+(new Date(this.state.product.date_registered).getMonth()+1)+"-"+new Date(this.state.product.date_registered).getFullYear()]}),Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Time :"}),new Date(this.state.product.date_registered).getHours()+":"+new Date(this.state.product.date_registered).getMinutes()+(new Date(this.state.product.date_registered).getHours()<12?"AM":"PM")]})]}),Object(C.jsxs)("tr",{children:[Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Contact :"}),this.state.product.supplier_contact]}),Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Location :"}),this.state.product.supplier_location]})]}),Object(C.jsx)("tr",{children:Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Address :"}),this.state.product.supplier_address]})})]})})]})})})]})})})})]})]})}}]),a}(s.Component);function ue(e){return Object(C.jsx)($.a,Object(g.a)({elevation:6,variant:"filled"},e))}var Oe=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).handleClose=function(){s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open_dailog:!1}))},s.handleUnit=function(){var e=Object(v.a)(m.a.mark((function e(t){var a,c,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!0,messageState:"info"})),a=new FormData(t.target),c={},a.forEach((function(e,t){c[t]=e})),n=new ee,e.next=8,n.post("/user/admin/new_unit",c);case 8:!0===(r=e.sent).status?(s.setState(Object(g.a)(Object(g.a)({},s.state),{},{message:r.data,messageState:"success"})),setTimeout((function(){window.location.reload()}),500)):s.setState(Object(g.a)(Object(g.a)({},s.state),{},{message:r.data,messageState:"error"}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.handleSubmit=function(){var e=Object(v.a)(m.a.mark((function e(t){var a,c,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!0,messageState:"info"})),a=new FormData(t.target),c={},a.forEach((function(e,t){c[t]=e})),0!==s.state.units.length){e.next=8;break}return s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!0,message:"No Selling Units Registered",messageState:"error"})),e.abrupt("return");case 8:return c.units=s.state.units,c.date=Date.now(),n=new ee,e.next=13,n.post("/user/sale/new_product",c);case 13:!0===(r=e.sent).status?(s.setState(Object(g.a)(Object(g.a)({},s.state),{},{message:r.data,messageState:"success"})),setTimeout((function(){window.location.reload()}),500)):s.setState(Object(g.a)(Object(g.a)({},s.state),{},{message:r.data,messageState:"error"}));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.closePopUp=function(e,t){"clickaway"!==t&&s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!1,message:"Please Wait...",messageState:"info"}))},s.state={open:!1,open_dailog:!1,message:"Please Wait...",messageState:"",suppliers:[],units:[],new_unit_error:!1,selling_units:[]},s.units(),s}return Object(l.a)(a,[{key:"units",value:function(){var e=Object(v.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.data("/user/all/units");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:(t=e.t0)&&this.setState(Object(g.a)(Object(g.a)({},this.state),{},{selling_units:"Error"===t?[]:t}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(J.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.open,autoHideDuration:5e3,onClose:this.closePopUp,action:Object(C.jsx)(c.a.Fragment,{children:Object(C.jsx)(L.a,{size:"small","aria-label":"close",color:"inherit",onClick:this.closePopUp,children:Object(C.jsx)("i",{className:"las la-times"})})}),children:Object(C.jsx)(ue,{onClose:this.closePopUp,severity:this.state.messageState,children:this.state.message})}),Object(C.jsx)("input",{type:"checkbox",id:"nav-toggle",defaultChecked:!0}),Object(C.jsx)(P,{active:"dashboard"}),Object(C.jsxs)("div",{className:"main-content",children:[Object(C.jsx)(X,{}),Object(C.jsx)("main",{children:Object(C.jsx)("div",{className:"fullwidth-ctr",children:Object(C.jsx)("div",{className:"projects",children:Object(C.jsxs)("form",{className:"card",autoComplete:"off",onSubmit:this.handleSubmit,children:[Object(C.jsx)("div",{className:"",style:{borderBottom:"1px solid #f0f0f0",padding:"1rem"},children:Object(C.jsxs)("div",{className:"form-header-ctr",children:[Object(C.jsx)("div",{className:"",children:Object(C.jsx)(f.a,{variant:"contained",color:"primary",style:{marginInline:10},onClick:function(t){e.setState(Object(g.a)(Object(g.a)({},e.state),{},{open_dailog:!0}))},children:"Add Unit"})}),Object(C.jsxs)("div",{className:"",children:[Object(C.jsx)(f.a,{type:"submit","aria-describedby":this.id,variant:"contained",color:"primary",style:{marginInline:10},onClick:function(){window.location.reload()},children:"Cancel"}),Object(C.jsx)(f.a,{type:"submit","aria-describedby":this.id,variant:"contained",color:"primary",style:{marginInline:10},children:"Save"})]})]})}),Object(C.jsx)("div",{className:"card-body",children:Object(C.jsx)("div",{children:Object(C.jsxs)("div",{className:"inputCtr",children:[Object(C.jsx)("h4",{children:"Medicine Entry"}),Object(C.jsxs)("div",{className:"inputs_ctr_np",children:[Object(C.jsxs)("div",{className:"inputs_left_np",children:[Object(C.jsx)(T.a,{name:"generic_name",variant:"outlined",label:"Generic Name",style:{width:"75%",margin:"20px"}}),Object(C.jsx)(T.a,{name:"description",variant:"outlined",label:"Medicine Description",style:{width:"75%",margin:"20px"}})]}),Object(C.jsxs)("div",{className:"inputs_right_np",children:[Object(C.jsx)("h4",{style:{margin:"20px"},children:"Selling Units"}),Object(C.jsx)("div",{className:"tbl_ctr_np",children:Object(C.jsxs)("table",{width:"100%",children:[Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:"Selling Unit"}),Object(C.jsx)("td",{children:"Quantity"}),Object(C.jsx)("td",{children:"Retail"}),Object(C.jsx)("td",{children:"Wholesale"})]})}),Object(C.jsx)("tbody",{children:0===this.state.units.length?Object(C.jsx)("tr",{children:Object(C.jsx)("td",{children:"No Selected Units"})}):this.state.units.map((function(t,a){return Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:Object(C.jsxs)(B.a,{error:e.state.new_unit_error,variant:"standard",label:"supplier",style:{width:"95%"},children:[Object(C.jsx)(H.a,{id:"selling_unit",children:0===a?"Smallest Unit":"Unit ".concat(a+1)}),Object(C.jsx)(K.a,{inputProps:{name:"selling_unit"},label:0===a?"Smallest Unit":"Unit ".concat(a+1),id:"select_selling_unit",defaultValue:"",onChange:function(t){var s=e.state.units;s[a].selling_unit=t.target.value,e.setState(Object(g.a)(Object(g.a)({},e.state),{},{units:s}))},children:0===e.state.selling_units.length?"No Unit Added":e.state.selling_units.map((function(e,t){return Object(C.jsx)(_.a,{value:e.unit_name,children:e.unit_name},t)}))})]})}),Object(C.jsx)("td",{children:Object(C.jsx)(T.a,{multiline:!0,variant:"standard",defaultValue:0===a?"1":"",label:0===a?"Quantity":"Quantity In Unit ".concat(a),onChange:function(t){var s=e.state.units;s[a].qty=t.target.value,e.setState(Object(g.a)(Object(g.a)({},e.state),{},{units:s}))},style:{width:"95%"}})}),Object(C.jsx)("td",{children:Object(C.jsx)(T.a,{variant:"standard",label:"Retail",error:e.state.new_unit_error,onChange:function(t){var s=e.state.units;s[a].retail=t.target.value,e.setState(Object(g.a)(Object(g.a)({},e.state),{},{units:s}))},style:{width:"95%"}})}),Object(C.jsx)("td",{children:Object(C.jsx)(T.a,{variant:"standard",label:"Wholesale",error:e.state.new_unit_error,onChange:function(t){var s=e.state.units;s[a].wholesale=t.target.value,e.setState(Object(g.a)(Object(g.a)({},e.state),{},{units:s}))},style:{width:"95%"}})})]},a)}))})]})}),Object(C.jsx)("div",{className:"",style:{display:"flex",justifyContent:"flex-end",width:"95%",margin:"10px auto"},children:Object(C.jsx)(f.a,{variant:"contained",color:"primary",onClick:function(){if(0===e.state.units.length)e.setState(Object(g.a)(Object(g.a)({},e.state),{},{units:[].concat(Object(Q.a)(e.state.units),[{qty:1}])}));else if(1===e.state.units.length){var t=e.state.units;t[0].selling_unit&&t[0].qty&&t[0].retail&&t[0].wholesale?e.setState(Object(g.a)(Object(g.a)({},e.state),{},{units:[].concat(Object(Q.a)(e.state.units),[{}]),new_unit_error:!1})):e.setState(Object(g.a)(Object(g.a)({},e.state),{},{new_unit_error:!0,open:!0,message:"Some Fields are missing",messageState:"error"}))}else{var a=e.state.units;a[a.length-1].selling_unit&&a[a.length-1].qty&&a[a.length-1].retail&&a[a.length-1].wholesale?parseInt(a[a.length-1].qty)*parseInt(a[a.length-2].retail)===parseInt(a[a.length-1].retail)||parseInt(a[a.length-1].qty)*parseInt(a[a.length-2].wholesale)===parseInt(a[a.length-1].wholesale)?e.setState(Object(g.a)(Object(g.a)({},e.state),{},{units:[].concat(Object(Q.a)(e.state.units),[{}]),new_unit_error:!1})):e.setState(Object(g.a)(Object(g.a)({},e.state),{},{new_unit_error:!0,open:!0,message:"Unit Prices Mismatch",messageState:"error"})):e.setState(Object(g.a)(Object(g.a)({},e.state),{},{new_unit_error:!0,open:!0,message:"Some Fields are Missing",messageState:"error"}))}},children:"New Unit"})})]})]})]})})})]})})})})]}),Object(C.jsxs)(S.a,{open:this.state.open_dailog,onClose:this.handleClose,"aria-labelledby":"form-dialog-title",children:[Object(C.jsx)(w.a,{id:"form-dialog-title",children:"Add Selling Unit"}),Object(C.jsxs)("form",{onSubmit:this.handleUnit,autoComplete:"off",children:[Object(C.jsx)(N.a,{children:Object(C.jsx)(D.a,{children:Object(C.jsx)(T.a,{name:"unit_name",variant:"standard",label:"Unit Name",style:{width:"85%",margin:"20px"}})})}),Object(C.jsxs)(k.a,{children:[Object(C.jsx)(f.a,{onClick:this.handleClose,color:"primary",children:"Cancel"}),Object(C.jsx)(f.a,{type:"submit",color:"primary",children:"Save"})]})]})]})]})}}]),a}(s.Component),pe=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={},s}return Object(l.a)(a,[{key:"render",value:function(){return Object(C.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[Object(C.jsx)("h1",{style:{marginBlock:20},children:"404"}),Object(C.jsx)("span",{style:{marginBlock:10},children:"This Page Was Not Found On The Server"}),Object(C.jsx)(O.b,{to:"/",children:Object(C.jsxs)(f.a,{variant:"contained",color:"primary",style:{marginBlock:20},children:[Object(C.jsx)("span",{style:{fontSize:"17.5px",marginRight:"10px"},children:Object(C.jsx)("span",{className:"las la-home"})}),"Home"]})})]})}}]),a}(s.Component),xe=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={},s}return Object(l.a)(a,[{key:"render",value:function(){return Object(C.jsx)(O.a,{children:Object(C.jsx)("div",{children:Object(C.jsxs)(p.c,{children:[Object(C.jsx)(p.a,{path:"/",exact:!0,component:V}),Object(C.jsx)(p.a,{path:"/new-sale",exact:!0,component:re}),Object(C.jsx)(p.a,{path:"/all-products",exact:!0,component:le}),Object(C.jsx)(p.a,{path:"/new-purchase",exact:!0,component:je}),Object(C.jsx)(p.a,{path:"/new-product",exact:!0,component:Oe}),Object(C.jsx)(p.a,{path:"/product",exact:!0,component:be}),Object(C.jsx)(p.a,{path:"*",component:pe})]})})})}}]),a}(s.Component),me=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={},s}return Object(l.a)(a,[{key:"render",value:function(){return Object(C.jsx)(C.Fragment,{children:Object(C.jsx)("h1",{children:"Xamuel"})})}}]),a}(s.Component),ge=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={},s}return Object(l.a)(a,[{key:"render",value:function(){return Object(C.jsx)(C.Fragment,{children:Object(C.jsx)("div",{className:"sideBar-ctr",children:Object(C.jsxs)("div",{className:"sidebar",children:[Object(C.jsx)("label",{htmlFor:"nav-toggle",className:"close-on-sm",children:Object(C.jsx)("span",{className:"las la-times"})}),Object(C.jsx)("div",{className:"sidebar-brand",children:Object(C.jsxs)("h2",{children:[Object(C.jsx)("span",{className:"las la-clinic-medical",style:{fontSize:"32px"}}),Object(C.jsx)("span",{children:"Pharmacy"})]})}),Object(C.jsx)("div",{className:"sidebar-menu",children:Object(C.jsxs)("ul",{children:[Object(C.jsx)("li",{children:Object(C.jsx)(O.b,{to:"/",children:Object(C.jsxs)("span",{className:"".concat("dashboard"===this.props.active?"active":""," _a_replaced"),children:[Object(C.jsx)("span",{className:"las la-home"}),Object(C.jsx)("span",{children:"Dashboard"})]})})}),Object(C.jsx)("li",{children:Object(C.jsx)(O.b,{to:"/new-sale",children:Object(C.jsxs)("span",{className:"".concat("sale"===this.props.active?"active":""," _a_replaced"),children:[Object(C.jsx)("span",{className:"las la-user-plus"}),Object(C.jsx)("span",{children:"New Sale"})]})})}),Object(C.jsx)("li",{children:Object(C.jsx)(O.b,{to:"/new-purchase",children:Object(C.jsxs)("span",{className:"".concat("purchase"===this.props.active?"active":""," _a_replaced"),children:[Object(C.jsx)("span",{className:"las la-prescription-bottle-alt"}),Object(C.jsx)("span",{children:"New Purchase"})]})})}),Object(C.jsx)("li",{children:Object(C.jsx)(O.b,{to:"/finance",children:Object(C.jsxs)("span",{className:"".concat("finance"===this.props.active?"active":""," _a_replaced"),children:[Object(C.jsx)("span",{className:"las la-comments-dollar"}),Object(C.jsx)("span",{children:"Finance"})]})})}),Object(C.jsx)("li",{children:Object(C.jsx)(O.b,{to:"/reports",children:Object(C.jsxs)("span",{className:"".concat("reports"===this.props.active?"active":""," _a_replaced"),children:[Object(C.jsx)("span",{className:"las la-comment"}),Object(C.jsx)("span",{children:"Finance"})]})})})]})})]})})})}}]),a}(s.Component);var ve=function(){var e=Object(s.useState)(null),t=Object(A.a)(e,2),a=t[0],n=t[1],r=c.a.useState(!1),i=Object(A.a)(r,2),l=i[0],d=i[1],j=function(){n(null)},o=function(){d(!1)};return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("header",{children:[Object(C.jsxs)("h2",{children:[Object(C.jsx)("label",{htmlFor:"nav-toggle",children:Object(C.jsx)("span",{className:"las la-bars"})}),Object(C.jsx)("span",{className:"health_unit_name",children:"Freedom Health"})]}),Object(C.jsxs)("div",{className:"search-wrapper",children:[Object(C.jsx)("span",{className:"las la-search"}),Object(C.jsx)("input",{type:"search",name:"",id:"",placeholder:"Search here"})]}),Object(C.jsxs)("div",{className:"",style:{display:"flex",alignItems:"center"},children:[Object(C.jsx)("div",{className:"",style:{fontSize:"42px",marginRight:20},children:Object(C.jsx)("i",{className:"las la-bell"})}),Object(C.jsxs)("div",{className:"user-wrapper","aria-controls":"reception-actions","aria-haspopup":"true",onClick:function(e){n(e.currentTarget)},style:{cursor:"pointer"},children:[Object(C.jsx)("img",{src:U,alt:"",width:"40px",height:"40px"}),Object(C.jsxs)("div",{className:"",children:[Object(C.jsx)("h4",{children:u.user.username}),Object(C.jsx)("small",{children:u.user.user_role})]})]})]})]}),Object(C.jsxs)(y.a,{id:"reception-actions",anchorEl:a,keepMounted:!0,disableScrollLock:!0,open:Boolean(a),onClose:j,children:[Object(C.jsxs)(_.a,{onClick:j,children:[Object(C.jsx)("span",{style:{fontSize:24,marginRight:10},children:Object(C.jsx)("i",{className:"las la-user-alt"})}),"Profile"]}),Object(C.jsxs)(_.a,{onClick:function(){d(!0)},children:[Object(C.jsx)("span",{style:{fontSize:24,marginRight:10},children:Object(C.jsx)("i",{className:"las la-sign-out-alt"})}),"Log out"]})]}),Object(C.jsxs)(S.a,{open:l,onClose:o,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(C.jsx)(w.a,{id:"alert-dialog-title",children:"Log Out"}),Object(C.jsx)(N.a,{children:Object(C.jsx)(D.a,{id:"alert-dialog-description",children:"Want to Log Out. Click 'Stay' to close, Log Out to Continue"})}),Object(C.jsxs)(k.a,{children:[Object(C.jsx)(f.a,{onClick:o,color:"primary",children:"Stay"}),Object(C.jsx)(f.a,{variant:"contained",color:"primary",autoFocus:!0,onClick:function(){M()},children:"Log Out"})]})]})]})},fe=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).expiry_products=Object(v.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.data("/user/all/batch/expiry");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:(t=e.t0)&&s.setState(Object(g.a)(Object(g.a)({},s.state),{},{expiry_products:"Error"!==t?t:[]}));case 7:case"end":return e.stop()}}),e)}))),s.less_qty=Object(v.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.data("/user/all/less_qty");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:(t=e.t0)&&s.setState(Object(g.a)(Object(g.a)({},s.state),{},{less_qty_pdts:"Error"!==t?t:[]}));case 7:case"end":return e.stop()}}),e)}))),s.handleOpenActions=function(e){s.setState(Object(g.a)(Object(g.a)({},s.state),{},{AnchorEl:e.currentTarget}))},s.handleOpenActionsDrugs=function(e){s.setState(Object(g.a)(Object(g.a)({},s.state),{},{AnchorElDrugs:e.currentTarget}))},s.handleCloseActions=function(){s.setState(Object(g.a)(Object(g.a)({},s.state),{},{AnchorEl:null}))},s.handleCloseActionsDrugs=function(){s.setState(Object(g.a)(Object(g.a)({},s.state),{},{AnchorElDrugs:null}))},s.state={AnchorEl:null,AnchorElDrugs:null,products:[],purchase_number:"...",sales_number:"...",expiry_products:[],less_qty_pdts:[]},s.products(),s.purchases(),s.sales(),s.expiry_products(),s.less_qty(),s}return Object(l.a)(a,[{key:"products",value:function(){var e=Object(v.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.data("/user/all/products");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:(t=e.t0)&&this.setState(Object(g.a)(Object(g.a)({},this.state),{},{products:t}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"purchases",value:function(){var e=Object(v.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.data("/user/all/purchases");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:(t=e.t0)&&this.setState(Object(g.a)(Object(g.a)({},this.state),{},{purchase_number:t.length}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sales",value:function(){var e=Object(v.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.data("/user/all/sales");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:(t=e.t0)&&this.setState(Object(g.a)(Object(g.a)({},this.state),{},{sales_number:t.length}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("input",{type:"checkbox",id:"nav-toggle",defaultChecked:!0}),Object(C.jsx)(ge,{active:"dashboard"}),Object(C.jsxs)("div",{className:"main-content",children:[Object(C.jsx)(ve,{}),Object(C.jsxs)("main",{children:[Object(C.jsxs)("div",{className:"cards",children:[Object(C.jsxs)("div",{className:"card-single",children:[Object(C.jsxs)("div",{className:"",children:[Object(C.jsx)("h1",{children:this.state.expiry_products.length}),Object(C.jsxs)("span",{children:["Medicines ",Object(C.jsx)("br",{}),Object(C.jsx)("span",{style:{fontSize:"13px"},children:"Expire in less than 90 days"})]})]}),Object(C.jsx)("div",{className:"",children:Object(C.jsx)("span",{className:"las la-users",children:" "})})]}),Object(C.jsxs)("div",{className:"card-single",children:[Object(C.jsxs)("div",{className:"",children:[Object(C.jsx)("h1",{children:this.state.sales_number}),Object(C.jsx)("span",{children:"Sales"}),Object(C.jsx)("br",{}),Object(C.jsx)("span",{style:{fontSize:"13px"},children:"Made This Month"})]}),Object(C.jsx)("div",{className:"",children:Object(C.jsx)("span",{className:"las la-users"})})]}),Object(C.jsxs)("div",{className:"card-single",children:[Object(C.jsxs)("div",{className:"",children:[Object(C.jsx)("h1",{children:this.state.purchase_number}),Object(C.jsx)("span",{children:"Sales"}),Object(C.jsx)("br",{}),Object(C.jsx)("span",{style:{fontSize:"13px"},children:"Made Today"})]}),Object(C.jsx)("div",{className:"",children:Object(C.jsx)("span",{className:"las la-users",children:" "})})]}),Object(C.jsxs)("div",{className:"card-single",children:[Object(C.jsxs)("div",{className:"",children:[Object(C.jsx)("h1",{children:this.state.products.length}),Object(C.jsx)("span",{children:"Medicines"}),Object(C.jsx)("br",{}),Object(C.jsx)("span",{style:{fontSize:"13px"},children:"Registered"})]}),Object(C.jsx)("div",{className:"",children:Object(C.jsx)("span",{className:"las la-users",children:" "})})]})]}),Object(C.jsxs)("div",{className:"recent-grid",children:[Object(C.jsx)("div",{className:"projects",children:Object(C.jsxs)("div",{className:"card",children:[Object(C.jsxs)("div",{className:"card-header",children:[Object(C.jsx)("h3",{children:"Batches - Expiring In 90 Days"}),Object(C.jsxs)(f.a,{variant:"contained",color:"primary","aria-controls":"drug-actions","aria-haspopup":"true",onClick:this.handleOpenActionsDrugs,children:["Menu",Object(C.jsx)("span",{style:{fontSize:"17.5px",marginLeft:"10px"},children:Object(C.jsx)("span",{className:"las la-angle-down"})})]}),Object(C.jsxs)(y.a,{id:"drug-actions",anchorEl:this.state.AnchorElDrugs,keepMounted:!0,open:Boolean(this.state.AnchorElDrugs),onClose:this.handleCloseActionsDrugs,disableScrollLock:!0,children:[Object(C.jsx)(O.b,{to:"/new-product",children:Object(C.jsx)(_.a,{onClick:this.handleCloseActionsDrugs,children:"New Product"})}),Object(C.jsx)(O.b,{to:"/all-products",children:Object(C.jsx)(_.a,{onClick:this.handleCloseActionsDrugs,children:"See All"})})]})]}),Object(C.jsx)("div",{className:"card-body",children:Object(C.jsxs)("table",{width:"100%",children:[Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:"Name"}),Object(C.jsx)("td",{children:"Batch No."}),Object(C.jsx)("td",{children:"Quantity In Batch"}),Object(C.jsx)("td",{children:"Expires On"})]})}),Object(C.jsx)("tbody",{children:0===this.state.expiry_products.length?Object(C.jsx)("tr",{children:Object(C.jsx)("td",{children:"No Medicine Expires In 90 days"})}):this.state.expiry_products.map((function(e,t){return Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{className:"name_cell",children:e.product_generic_name}),Object(C.jsx)("td",{children:e.batch_no}),Object(C.jsx)("td",{children:e.batch_qty}),Object(C.jsx)("td",{children:e.batch_expiry_date})]},t)}))})]})})]})}),Object(C.jsx)("div",{className:"projects",children:Object(C.jsxs)("div",{className:"card",children:[Object(C.jsxs)("div",{className:"card-header",children:[Object(C.jsx)("h3",{children:"Quantity Less"}),Object(C.jsxs)("div",{className:"",children:[Object(C.jsxs)(f.a,{variant:"contained",color:"primary",onClick:function(){window.location.reload()},style:{marginRight:"15px"},children:[Object(C.jsx)("span",{style:{fontSize:"17.5px",marginLeft:"10px"},children:Object(C.jsx)("span",{className:"las la-redo"})}),"Refresh"]}),Object(C.jsxs)(f.a,{variant:"contained",color:"primary","aria-controls":"reception-actions","aria-haspopup":"true",onClick:this.handleOpenActions,children:["Other Menu",Object(C.jsx)("span",{style:{fontSize:"17.5px",marginLeft:"10px"},children:Object(C.jsx)("span",{className:"las la-angle-down"})})]}),Object(C.jsxs)(y.a,{id:"reception-actions",anchorEl:this.state.AnchorEl,keepMounted:!0,open:Boolean(this.state.AnchorEl),onClose:this.handleCloseActions,disableScrollLock:!0,children:[Object(C.jsx)(O.b,{to:"/new-user",children:Object(C.jsx)(_.a,{onClick:this.handleCloseActions,children:"New User"})}),Object(C.jsx)(O.b,{to:"/new-supplier",children:Object(C.jsx)(_.a,{onClick:this.handleCloseActions,children:"New Supplier"})}),Object(C.jsx)(O.b,{to:"/new-customer",children:Object(C.jsx)(_.a,{onClick:this.handleCloseActions,children:"New Customer"})})]})]})]}),Object(C.jsx)("div",{className:"card-body",children:Object(C.jsxs)("table",{width:"100%",children:[Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:"No."}),Object(C.jsx)("td",{children:"Name"}),Object(C.jsx)("td",{children:"Quantity"})]})}),Object(C.jsx)("tbody",{children:0===this.state.less_qty_pdts.length?Object(C.jsx)("tr",{children:Object(C.jsx)("td",{children:"No Medicines to display"})}):this.state.less_qty_pdts.map((function(e,t){return Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:t+1}),Object(C.jsx)("td",{className:"name_cell",children:"\n                                  ".concat(e.product_generic_name,"\n                                  ").concat(e.product_description_name,"\n                                  ")}),Object(C.jsx)("td",{children:e.product_qty})]},t)}))})]})})]})})]})]})]})]})}}]),a}(s.Component);function ye(e){return Object(C.jsx)($.a,Object(g.a)({elevation:6,variant:"filled"},e))}var _e=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).handleClose=function(){s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open_dailog:!1}))},s.handleUnit=function(){var e=Object(v.a)(m.a.mark((function e(t){var a,c,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!0,messageState:"info"})),a=new FormData(t.target),c={},a.forEach((function(e,t){c[t]=e})),n=new ee,e.next=8,n.post("/user/admin/new_unit",c);case 8:!0===(r=e.sent).status?(s.setState(Object(g.a)(Object(g.a)({},s.state),{},{message:r.data,messageState:"success"})),setTimeout((function(){window.location.reload()}),500)):s.setState(Object(g.a)(Object(g.a)({},s.state),{},{message:r.data,messageState:"error"}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.handleSubmit=function(){var e=Object(v.a)(m.a.mark((function e(t){var a,c,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!0,messageState:"info"})),a=new FormData(t.target),c={},a.forEach((function(e,t){c[t]=e})),0!==s.state.units.length){e.next=8;break}return s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!0,message:"No Selling Units Registered",messageState:"error"})),e.abrupt("return");case 8:return c.units=s.state.units,c.date=Date.now(),n=new ee,e.next=13,n.post("/user/sale/new_product",c);case 13:!0===(r=e.sent).status?(s.setState(Object(g.a)(Object(g.a)({},s.state),{},{message:r.data,messageState:"success"})),setTimeout((function(){window.location.reload()}),500)):s.setState(Object(g.a)(Object(g.a)({},s.state),{},{message:r.data,messageState:"error"}));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.closePopUp=function(e,t){"clickaway"!==t&&s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!1,message:"Please Wait...",messageState:"info"}))},s.state={open:!1,open_dailog:!1,message:"Please Wait...",messageState:"",suppliers:[],units:[],new_unit_error:!1,selling_units:[]},s.units(),s}return Object(l.a)(a,[{key:"units",value:function(){var e=Object(v.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.data("/user/all/units");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:(t=e.t0)&&this.setState(Object(g.a)(Object(g.a)({},this.state),{},{selling_units:"Error"===t?[]:t}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(J.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.open,autoHideDuration:5e3,onClose:this.closePopUp,action:Object(C.jsx)(c.a.Fragment,{children:Object(C.jsx)(L.a,{size:"small","aria-label":"close",color:"inherit",onClick:this.closePopUp,children:Object(C.jsx)("i",{className:"las la-times"})})}),children:Object(C.jsx)(ye,{onClose:this.closePopUp,severity:this.state.messageState,children:this.state.message})}),Object(C.jsx)("input",{type:"checkbox",id:"nav-toggle",defaultChecked:!0}),Object(C.jsx)(ge,{active:"dashboard"}),Object(C.jsxs)("div",{className:"main-content",children:[Object(C.jsx)(ve,{}),Object(C.jsx)("main",{children:Object(C.jsx)("div",{className:"fullwidth-ctr",children:Object(C.jsx)("div",{className:"projects",children:Object(C.jsxs)("form",{className:"card",autoComplete:"off",onSubmit:this.handleSubmit,children:[Object(C.jsx)("div",{className:"",style:{borderBottom:"1px solid #f0f0f0",padding:"1rem"},children:Object(C.jsxs)("div",{className:"form-header-ctr",children:[Object(C.jsx)("div",{className:"",children:Object(C.jsx)(f.a,{variant:"contained",color:"primary",style:{marginInline:10},onClick:function(t){e.setState(Object(g.a)(Object(g.a)({},e.state),{},{open_dailog:!0}))},children:"Add Unit"})}),Object(C.jsxs)("div",{className:"",children:[Object(C.jsx)(f.a,{type:"submit","aria-describedby":this.id,variant:"contained",color:"primary",style:{marginInline:10},onClick:function(){window.location.reload()},children:"Cancel"}),Object(C.jsx)(f.a,{type:"submit","aria-describedby":this.id,variant:"contained",color:"primary",style:{marginInline:10},children:"Save"})]})]})}),Object(C.jsx)("div",{className:"card-body",children:Object(C.jsx)("div",{children:Object(C.jsxs)("div",{className:"inputCtr",children:[Object(C.jsx)("h4",{children:"Medicine Entry"}),Object(C.jsxs)("div",{className:"inputs_ctr_np",children:[Object(C.jsxs)("div",{className:"inputs_left_np",children:[Object(C.jsx)(T.a,{name:"generic_name",variant:"outlined",label:"Generic Name",style:{width:"75%",margin:"20px"}}),Object(C.jsx)(T.a,{name:"description",variant:"outlined",label:"Medicine Description",style:{width:"75%",margin:"20px"}})]}),Object(C.jsxs)("div",{className:"inputs_right_np",children:[Object(C.jsx)("h4",{style:{margin:"20px"},children:"Selling Units"}),Object(C.jsx)("div",{className:"tbl_ctr_np",children:Object(C.jsxs)("table",{width:"100%",children:[Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:"Selling Unit"}),Object(C.jsx)("td",{children:"Quantity"}),Object(C.jsx)("td",{children:"Retail"}),Object(C.jsx)("td",{children:"Wholesale"})]})}),Object(C.jsx)("tbody",{children:0===this.state.units.length?Object(C.jsx)("tr",{children:Object(C.jsx)("td",{children:"No Selected Units"})}):this.state.units.map((function(t,a){return Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:Object(C.jsxs)(B.a,{error:e.state.new_unit_error,variant:"standard",label:"supplier",style:{width:"95%"},children:[Object(C.jsx)(H.a,{id:"selling_unit",children:0===a?"Smallest Unit":"Unit ".concat(a+1)}),Object(C.jsx)(K.a,{inputProps:{name:"selling_unit"},label:0===a?"Smallest Unit":"Unit ".concat(a+1),id:"select_selling_unit",defaultValue:"",onChange:function(t){var s=e.state.units;s[a].selling_unit=t.target.value,e.setState(Object(g.a)(Object(g.a)({},e.state),{},{units:s}))},children:0===e.state.selling_units.length?"No Unit Added":e.state.selling_units.map((function(e,t){return Object(C.jsx)(_.a,{value:e.unit_name,children:e.unit_name},t)}))})]})}),Object(C.jsx)("td",{children:Object(C.jsx)(T.a,{multiline:!0,variant:"standard",defaultValue:0===a?"1":"",label:0===a?"Quantity":"Quantity In Unit ".concat(a),onChange:function(t){var s=e.state.units;s[a].qty=t.target.value,e.setState(Object(g.a)(Object(g.a)({},e.state),{},{units:s}))},style:{width:"95%"}})}),Object(C.jsx)("td",{children:Object(C.jsx)(T.a,{variant:"standard",label:"Retail",error:e.state.new_unit_error,onChange:function(t){var s=e.state.units;s[a].retail=t.target.value,e.setState(Object(g.a)(Object(g.a)({},e.state),{},{units:s}))},style:{width:"95%"}})}),Object(C.jsx)("td",{children:Object(C.jsx)(T.a,{variant:"standard",label:"Wholesale",error:e.state.new_unit_error,onChange:function(t){var s=e.state.units;s[a].wholesale=t.target.value,e.setState(Object(g.a)(Object(g.a)({},e.state),{},{units:s}))},style:{width:"95%"}})})]},a)}))})]})}),Object(C.jsx)("div",{className:"",style:{display:"flex",justifyContent:"flex-end",width:"95%",margin:"10px auto"},children:Object(C.jsx)(f.a,{variant:"contained",color:"primary",onClick:function(){if(0===e.state.units.length)e.setState(Object(g.a)(Object(g.a)({},e.state),{},{units:[].concat(Object(Q.a)(e.state.units),[{qty:1}])}));else if(1===e.state.units.length){var t=e.state.units;t[0].selling_unit&&t[0].qty&&t[0].retail&&t[0].wholesale?e.setState(Object(g.a)(Object(g.a)({},e.state),{},{units:[].concat(Object(Q.a)(e.state.units),[{}]),new_unit_error:!1})):e.setState(Object(g.a)(Object(g.a)({},e.state),{},{new_unit_error:!0,open:!0,message:"Some Fields are missing",messageState:"error"}))}else{var a=e.state.units;a[a.length-1].selling_unit&&a[a.length-1].qty&&a[a.length-1].retail&&a[a.length-1].wholesale?parseInt(a[a.length-1].qty)*parseInt(a[a.length-2].retail)===parseInt(a[a.length-1].retail)||parseInt(a[a.length-1].qty)*parseInt(a[a.length-2].wholesale)===parseInt(a[a.length-1].wholesale)?e.setState(Object(g.a)(Object(g.a)({},e.state),{},{units:[].concat(Object(Q.a)(e.state.units),[{}]),new_unit_error:!1})):e.setState(Object(g.a)(Object(g.a)({},e.state),{},{new_unit_error:!0,open:!0,message:"Unit Prices Mismatch",messageState:"error"})):e.setState(Object(g.a)(Object(g.a)({},e.state),{},{new_unit_error:!0,open:!0,message:"Some Fields are Missing",messageState:"error"}))}},children:"New Unit"})})]})]})]})})})]})})})})]}),Object(C.jsxs)(S.a,{open:this.state.open_dailog,onClose:this.handleClose,"aria-labelledby":"form-dialog-title",children:[Object(C.jsx)(w.a,{id:"form-dialog-title",children:"Add Selling Unit"}),Object(C.jsxs)("form",{onSubmit:this.handleUnit,autoComplete:"off",children:[Object(C.jsx)(N.a,{children:Object(C.jsx)(D.a,{children:Object(C.jsx)(T.a,{name:"unit_name",variant:"standard",label:"Unit Name",style:{width:"85%",margin:"20px"}})})}),Object(C.jsxs)(k.a,{children:[Object(C.jsx)(f.a,{onClick:this.handleClose,color:"primary",children:"Cancel"}),Object(C.jsx)(f.a,{type:"submit",color:"primary",children:"Save"})]})]})]})]})}}]),a}(s.Component);function Se(e){return Object(C.jsx)($.a,Object(g.a)({elevation:6,variant:"filled"},e))}var we=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).handleSubmit=function(){var e=Object(v.a)(m.a.mark((function e(t){var a,c,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!0,messageState:"info"})),a=new FormData(t.target),c={},a.forEach((function(e,t){c[t]=e})),c.date=Date.now(),n=new ee,e.next=9,n.post("/user/sale/new_supplier",c);case 9:!0===(r=e.sent).status?(s.setState(Object(g.a)(Object(g.a)({},s.state),{},{message:r.data,messageState:"success"})),setTimeout((function(){window.location.reload()}),500)):s.setState(Object(g.a)(Object(g.a)({},s.state),{},{message:r.data,messageState:"error"}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.closePopUp=function(e,t){"clickaway"!==t&&s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!1}))},s.state={open:!1,message:"Please Wait...",messageState:""},s}return Object(l.a)(a,[{key:"render",value:function(){return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(J.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.open,autoHideDuration:5e3,onClose:this.closePopUp,action:Object(C.jsx)(c.a.Fragment,{children:Object(C.jsx)(L.a,{size:"small","aria-label":"close",color:"inherit",onClick:this.closePopUp,children:Object(C.jsx)("i",{className:"las la-times"})})}),children:Object(C.jsx)(Se,{onClose:this.closePopUp,severity:this.state.messageState,children:this.state.message})}),Object(C.jsx)("input",{type:"checkbox",id:"nav-toggle",defaultChecked:!0}),Object(C.jsx)(ge,{active:"dashboard"}),Object(C.jsxs)("div",{className:"main-content",children:[Object(C.jsx)(ve,{}),Object(C.jsx)("main",{children:Object(C.jsx)("div",{className:"fullwidth-ctr",children:Object(C.jsx)("div",{className:"projects",children:Object(C.jsxs)("form",{className:"card",autoComplete:"off",onSubmit:this.handleSubmit,children:[Object(C.jsx)("div",{className:"",style:{borderBottom:"1px solid #f0f0f0",padding:"1rem"},children:Object(C.jsxs)("div",{className:"form-header-ctr",children:[Object(C.jsx)("div",{className:"",children:Object(C.jsx)("h3",{children:"New Supplier"})}),Object(C.jsxs)("div",{className:"",children:[Object(C.jsx)(f.a,{type:"submit","aria-describedby":this.id,variant:"contained",color:"primary",style:{marginInline:10},children:"Cancel"}),Object(C.jsx)(f.a,{type:"submit","aria-describedby":this.id,variant:"contained",color:"primary",style:{marginInline:10},children:"Save"})]})]})}),Object(C.jsx)("div",{className:"card-body",children:Object(C.jsx)("div",{children:Object(C.jsxs)("div",{className:"inputCtr",children:[Object(C.jsx)("h4",{children:"Supplier Details"}),Object(C.jsxs)("div",{className:"inputs_ctr",children:[Object(C.jsxs)("div",{className:"inpts_on_left",children:[Object(C.jsx)(T.a,{name:"supplier_surname",variant:"outlined",label:"First name",style:{width:"75%",margin:"20px"}}),Object(C.jsx)(T.a,{name:"supplier_lastname",variant:"outlined",label:"Last name",style:{width:"75%",margin:"20px"}}),Object(C.jsx)(T.a,{name:"supplier_contact",variant:"outlined",label:"Phonenumber",style:{width:"75%",margin:"20px"}}),Object(C.jsx)(T.a,{name:"supplier_location",variant:"outlined",label:"Location",style:{width:"75%",margin:"20px"}})]}),Object(C.jsx)("div",{className:"inpts_center",children:Object(C.jsx)(T.a,{name:"supplier_address",variant:"outlined",label:"Address",style:{width:"75%",margin:"20px"}})})]})]})})})]})})})})]})]})}}]),a}(s.Component);function Ne(e){return Object(C.jsx)($.a,Object(g.a)({elevation:6,variant:"filled"},e))}var De=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).handleSubmit=function(){var e=Object(v.a)(m.a.mark((function e(t){var a,c,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!0,messageState:"info"})),a=new FormData(t.target),c={},a.forEach((function(e,t){c[t]=e})),n=new ee,e.next=8,n.post("/user/sale/new_customer",c);case 8:!0===(r=e.sent).status?(s.setState(Object(g.a)(Object(g.a)({},s.state),{},{message:r.data,messageState:"success"})),setTimeout((function(){window.location.reload()}),500)):s.setState(Object(g.a)(Object(g.a)({},s.state),{},{message:r.data,messageState:"error"}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.closePopUp=function(e,t){"clickaway"!==t&&s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!1}))},s.state={open:!1,message:"Please Wait...",messageState:""},s}return Object(l.a)(a,[{key:"render",value:function(){return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(J.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.open,autoHideDuration:5e3,onClose:this.closePopUp,action:Object(C.jsx)(c.a.Fragment,{children:Object(C.jsx)(L.a,{size:"small","aria-label":"close",color:"inherit",onClick:this.closePopUp,children:Object(C.jsx)("i",{className:"las la-times"})})}),children:Object(C.jsx)(Ne,{onClose:this.closePopUp,severity:this.state.messageState,children:this.state.message})}),Object(C.jsx)("input",{type:"checkbox",id:"nav-toggle",defaultChecked:!0}),Object(C.jsx)(ge,{active:"dashboard"}),Object(C.jsxs)("div",{className:"main-content",children:[Object(C.jsx)(ve,{}),Object(C.jsx)("main",{children:Object(C.jsx)("div",{className:"fullwidth-ctr",children:Object(C.jsx)("div",{className:"projects",children:Object(C.jsxs)("form",{className:"card",autoComplete:"off",onSubmit:this.handleSubmit,children:[Object(C.jsx)("div",{className:"",style:{borderBottom:"1px solid #f0f0f0",padding:"1rem"},children:Object(C.jsxs)("div",{className:"form-header-ctr",children:[Object(C.jsx)("div",{className:"",children:Object(C.jsx)("h3",{children:"New Customer"})}),Object(C.jsxs)("div",{className:"",children:[Object(C.jsx)(f.a,{type:"submit","aria-describedby":this.id,variant:"contained",color:"primary",style:{marginInline:10},children:"Cancel"}),Object(C.jsx)(f.a,{type:"submit","aria-describedby":this.id,variant:"contained",color:"primary",style:{marginInline:10},children:"Save"})]})]})}),Object(C.jsx)("div",{className:"card-body",children:Object(C.jsx)("div",{children:Object(C.jsxs)("div",{className:"inputCtr",children:[Object(C.jsx)("h4",{children:"Customer Details"}),Object(C.jsxs)("div",{className:"inputs_ctr",children:[Object(C.jsxs)("div",{className:"inpts_on_left",children:[Object(C.jsx)(T.a,{name:"surname",variant:"outlined",label:"Surname",style:{width:"75%",margin:"20px"}}),Object(C.jsx)(T.a,{name:"first_name",variant:"outlined",label:"First Name",style:{width:"75%",margin:"20px"}}),Object(C.jsx)(T.a,{name:"phone_contact",variant:"outlined",label:"Phone Contact",style:{width:"75%",margin:"20px"}}),Object(C.jsxs)(B.a,{variant:"outlined",label:"type",style:{width:"75%",margin:"20px"},children:[Object(C.jsx)(H.a,{id:"type",children:"Type Of Customer"}),Object(C.jsxs)(K.a,{inputProps:{name:"type"},label:"type",id:"select_type",defaultValue:"",children:[Object(C.jsx)(_.a,{value:"1",children:"Retailer"}),Object(C.jsx)(_.a,{value:"2",children:"Final User"})]})]})]}),Object(C.jsx)("div",{className:"inpts_center",children:Object(C.jsxs)(B.a,{variant:"outlined",label:"address",style:{width:"75%",margin:"20px"},children:[Object(C.jsx)(H.a,{id:"address",children:"Address"}),Object(C.jsxs)(K.a,{inputProps:{name:"address"},label:"address",id:"select_address",defaultValue:"",children:[Object(C.jsx)(_.a,{value:"Aduku",children:"Aduku"}),Object(C.jsx)(_.a,{value:"Lira",children:"Lira"}),Object(C.jsx)(_.a,{value:"Gulu",children:"Gulu"}),Object(C.jsx)(_.a,{value:"Apac",children:"Apac"}),Object(C.jsx)(_.a,{value:"Kampala",children:"Kampala"})]})]})})]})]})})})]})})})})]})]})}}]),a}(s.Component);function ke(e){return Object(C.jsx)($.a,Object(g.a)({elevation:6,variant:"filled"},e))}var Ce=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).handleSubmit=function(){var e=Object(v.a)(m.a.mark((function e(t){var a,c,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!0,messageState:"info"})),a=new FormData(t.target),c={},a.forEach((function(e,t){c[t]=e})),n=new ee,e.next=8,n.post("/user/admin/new_user",c);case 8:!0===(r=e.sent).status?(s.setState(Object(g.a)(Object(g.a)({},s.state),{},{message:r.data,messageState:"success"})),setTimeout((function(){window.location.reload()}),500)):s.setState(Object(g.a)(Object(g.a)({},s.state),{},{message:r.data,messageState:"error"}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.closePopUp=function(e,t){"clickaway"!==t&&s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!1}))},s.state={open:!1,message:"Please Wait...",messageState:"",departments:[]},s}return Object(l.a)(a,[{key:"render",value:function(){return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(J.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.open,autoHideDuration:5e3,onClose:this.closePopUp,action:Object(C.jsx)(c.a.Fragment,{children:Object(C.jsx)(L.a,{size:"small","aria-label":"close",color:"inherit",onClick:this.closePopUp,children:Object(C.jsx)("i",{className:"las la-times"})})}),children:Object(C.jsx)(ke,{onClose:this.closePopUp,severity:this.state.messageState,children:this.state.message})}),Object(C.jsx)("input",{type:"checkbox",id:"nav-toggle",defaultChecked:!0}),Object(C.jsx)(ge,{active:"users"}),Object(C.jsxs)("div",{className:"main-content",children:[Object(C.jsx)(ve,{}),Object(C.jsx)("main",{children:Object(C.jsx)("div",{className:"fullwidth-ctr",children:Object(C.jsx)("div",{className:"projects",children:Object(C.jsxs)("form",{className:"card",autoComplete:"off",onSubmit:this.handleSubmit,children:[Object(C.jsx)("div",{className:"",style:{borderBottom:"1px solid #f0f0f0",padding:"1rem"},children:Object(C.jsxs)("div",{className:"form-header-ctr",children:[Object(C.jsx)("div",{className:"",children:Object(C.jsx)("h3",{children:"New User"})}),Object(C.jsxs)("div",{className:"",children:[Object(C.jsx)(f.a,{"aria-describedby":this.id,variant:"contained",color:"primary",style:{marginInline:10},children:"Cancel"}),Object(C.jsx)(f.a,{type:"submit","aria-describedby":this.id,variant:"contained",color:"primary",style:{marginInline:10},children:"Save"})]})]})}),Object(C.jsx)("div",{className:"card-body",children:Object(C.jsx)("div",{children:Object(C.jsxs)("div",{className:"inputCtr",children:[Object(C.jsx)("h4",{children:"User Details"}),Object(C.jsxs)("div",{className:"inputs_ctr",children:[Object(C.jsxs)("div",{className:"inpts_on_left",children:[Object(C.jsx)(T.a,{name:"surname",variant:"outlined",label:"Surname",style:{width:"75%",margin:"20px"}}),Object(C.jsx)(T.a,{name:"first_name",variant:"outlined",label:"First Name",style:{width:"75%",margin:"20px"}}),Object(C.jsx)(T.a,{name:"username",variant:"outlined",label:"Username",style:{width:"75%",margin:"20px"}})]}),Object(C.jsxs)("div",{className:"inpts_center",children:[Object(C.jsx)(T.a,{name:"phone_contact",variant:"outlined",label:"Phone Contact",style:{width:"75%",margin:"20px"}}),Object(C.jsxs)(B.a,{variant:"outlined",label:"Role",style:{width:"75%",margin:"20px"},children:[Object(C.jsx)(H.a,{id:"role",children:"Role"}),Object(C.jsxs)(K.a,{inputProps:{name:"role"},id:"select_role",label:"Role",defaultValue:"",children:[Object(C.jsx)(_.a,{value:"cashier",children:"Cashier"}),Object(C.jsx)(_.a,{value:"dispenser",children:"Dispenser"}),Object(C.jsx)(_.a,{value:"admin",children:"Admin"})]})]}),Object(C.jsxs)(B.a,{variant:"outlined",label:"Gender",style:{width:"75%",margin:"20px"},children:[Object(C.jsx)(H.a,{id:"gender",children:"Gender"}),Object(C.jsxs)(K.a,{inputProps:{name:"gender"},id:"select_gender",label:"Gender",defaultValue:"M",children:[Object(C.jsx)(_.a,{value:"M",children:"Male"}),Object(C.jsx)(_.a,{value:"F",children:"Female"})]})]})]}),Object(C.jsxs)("div",{className:"inpts_on_right",children:[Object(C.jsx)(T.a,{type:"password",name:"password",variant:"outlined",label:"Password",style:{width:"75%",margin:"20px"}}),Object(C.jsx)(T.a,{type:"password",name:"confirm_password",variant:"outlined",label:"Confirm Password",style:{width:"75%",margin:"20px"}})]})]})]})})})]})})})})]})]})}}]),a}(s.Component);function Pe(e){return Object(C.jsx)($.a,Object(g.a)({elevation:6,variant:"filled"},e))}var Ae=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).handleSale=function(){var e=Object(v.a)(m.a.mark((function e(t){var a,c,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(s.state.batch_index),s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!0,messageState:"info"})),a=new FormData(t.target),c={},a.forEach((function(e,t){c[t]=e})),e.next=8,s.setState(Object(g.a)(Object(g.a)({},s.state),{},{_content:c}));case 8:return 0!==s.state.formData.length&&s.setState(Object(g.a)(Object(g.a)({},s.state),{},{_content:Object(g.a)(Object(g.a)({},s.state._content),{},{products_sold:s.state.formData,date:Date.now(),user:u.user.username})})),n=new ee,e.next=12,n.post("/user/sale/new_sale",s.state._content);case 12:!0===(r=e.sent).status?(s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!0,message:r.data,messageState:"success"})),setTimeout((function(){window.location.reload()}),500)):s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!0,message:r.data,messageState:"error"}));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.handleSubmit=function(){var e=Object(v.a)(m.a.mark((function e(t){var a,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!s.state.over_qty_error){e.next=4;break}return s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!0,messageState:"error",message:"Quantity Exceeds Available"})),e.abrupt("return");case 4:if(s.state.active_drug){e.next=7;break}return s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!0,messageState:"error",message:"No Selling Unit"})),e.abrupt("return");case 7:s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!0,messageState:"info"})),a=new FormData(t.target),c={},a.forEach((function(e,t){c[t]=e})),c.batch=s.state.batch?s.state.batch:[],s.state.formData.find((function(e){return e.product_name===c.product_name}))?s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!0,message:"Product Exists",messageState:"warning"})):s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!0,message:"Product Added",messageState:"success",formData:[].concat(Object(Q.a)(s.state.formData),[c]),print:!0,active_drug:null}));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.handleDrugNameKeyUp=function(){var e=Object(v.a)(m.a.mark((function e(t,a){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.target.value){e.next=9;break}return e.next=3,W.data("/user/sale/products/".concat(t.target.value));case 3:if(e.t1=e.sent,e.t1){e.next=6;break}e.t1=[];case 6:e.t0=e.t1,e.next=10;break;case 9:e.t0=[];case 10:(c=e.t0)&&s.setState(Object(g.a)(Object(g.a)({},s.state),{},{products:"Error"===c?[]:c}));case 12:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),s.handleChangeDrugName=function(e,t){t&&s.setState(Object(g.a)(Object(g.a)({},s.state),{},{active_drug:t}),(function(){s.setState(Object(g.a)(Object(g.a)({},s.state),{},{active_selling_unit:JSON.parse(s.state.active_drug.product_units)[0].selling_unit,active_selling_price:JSON.parse(s.state.active_drug.product_units)[0][s.state.active_sale_type]}),(function(){s.setState(Object(g.a)(Object(g.a)({},s.state),{},{active_product_qty:s.state.active_selling_unit===JSON.parse(s.state.active_drug.product_units)[0].selling_unit?parseInt(s.state.active_drug.product_qty):parseInt(s.state.active_drug.product_qty)/parseInt(JSON.parse(s.state.active_drug.product_units).find((function(t){return t.selling_unit===e.target.value})).qty)}))}))}))},s.closePopUp=function(e,t){"clickaway"!==t&&s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!1,message:""}))},s.state={open:!1,message:"Please Wait...",messageState:"",_content:{},form_visible:!1,active_product_qty:0,over_qty_error:!1,active_sale_type:"retail",active_selling_unit:"",active_selling_price:"",products:[],formData:[],total:0,discount:0,batch_index:1},s}return Object(l.a)(a,[{key:"getTotals",value:function(){var e=0;return 0!==this.state.formData.length&&this.state.formData.forEach((function(t){e+=parseInt(t.product_price)*parseInt(t.qty)})),e}},{key:"render",value:function(){var e=this;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(J.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.open,autoHideDuration:5e3,onClose:this.closePopUp,action:Object(C.jsx)(c.a.Fragment,{children:Object(C.jsx)(L.a,{size:"small","aria-label":"close",color:"inherit",onClick:this.closePopUp,children:Object(C.jsx)("i",{className:"las la-times"})})}),children:Object(C.jsx)(Pe,{onClose:this.closePopUp,severity:this.state.messageState,children:this.state.message})}),Object(C.jsx)("input",{type:"checkbox",id:"nav-toggle",defaultChecked:!0}),Object(C.jsx)(ge,{active:"sale"}),Object(C.jsxs)("div",{className:"main-content",children:[Object(C.jsx)(ve,{}),Object(C.jsx)("main",{children:Object(C.jsxs)("div",{className:"recent-grid",children:[Object(C.jsxs)("div",{className:"card",children:[Object(C.jsxs)("div",{className:"card-header",children:[Object(C.jsx)("h3",{children:"Sale List"}),Object(C.jsxs)(f.a,{"aria-describedby":this.id,variant:"contained",color:"primary",onClick:function(){window.location.reload()},style:{fontSize:"17.5px",marginRight:"15px"},children:[Object(C.jsx)("span",{style:{fontSize:"17.5px",marginRight:"10px"},children:Object(C.jsx)("i",{className:"las la-redo"})}),"Cancel"]})]}),Object(C.jsx)("div",{className:"card-body",children:Object(C.jsxs)("table",{width:"100%",children:[Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:"Name"}),Object(C.jsx)("td",{children:"Qty"}),Object(C.jsx)("td",{children:"Unit Price(Shs)"}),Object(C.jsx)("td",{children:"Total(Shs)"}),Object(C.jsx)("td",{})]})}),Object(C.jsx)("tbody",{children:0===this.state.formData.length?Object(C.jsx)("tr",{children:Object(C.jsx)("td",{children:"No Product Added"})}):this.state.formData.map((function(t,a){return Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{className:"name_cell",children:t.product_name}),Object(C.jsx)("td",{children:t.qty}),Object(C.jsx)("td",{children:t.product_price}),Object(C.jsx)("td",{children:parseInt(t.product_price)*parseInt(t.qty)}),Object(C.jsx)("td",{children:Object(C.jsx)(f.a,{variant:"contained",color:"primary",onClick:function(){var t=e.state.formData;t.splice(a,1),e.setState(Object(g.a)(Object(g.a)({},e.state),{},{formData:t}))},children:"Remove"})})]},a)}))}),Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{}),Object(C.jsx)("td",{}),Object(C.jsx)("td",{children:"Total"}),Object(C.jsx)("td",{children:this.getTotals()})]})})]})})]}),Object(C.jsxs)("div",{className:"projects",children:[Object(C.jsxs)("form",{className:"card",autoComplete:"off",onSubmit:this.handleSubmit,children:[Object(C.jsxs)("div",{className:"card-header card-header-payments",children:[Object(C.jsx)("div",{children:Object(C.jsxs)(B.a,{variant:"outlined",label:"selling_unit",style:{width:"85%",marginInline:"20px"},children:[Object(C.jsx)(H.a,{id:"sale_type",children:"Sale"}),Object(C.jsxs)(K.a,{inputProps:{name:"sale_type"},label:"Sale",id:"select_sale_type",value:this.state.active_sale_type,onChange:function(t,a){e.setState(Object(g.a)(Object(g.a)({},e.state),{},{active_sale_type:t.target.value,active_drug:null}))},children:[Object(C.jsx)(_.a,{value:"retail",children:"Retail"}),Object(C.jsx)(_.a,{value:"wholesale",children:"Wholesale"})]})]})}),Object(C.jsx)("div",{className:"",children:Object(C.jsxs)(f.a,{type:"submit","aria-describedby":this.id,variant:"contained",color:"primary",children:[Object(C.jsx)("span",{style:{fontSize:"17.5px",marginRight:"10px"},children:Object(C.jsx)("i",{className:"las la-plus-circle"})}),"Add"]})})]}),Object(C.jsx)("div",{className:"card-body",children:Object(C.jsx)("div",{children:Object(C.jsxs)("div",{className:"inputCtr",children:[Object(C.jsx)("h4",{children:"Product Details"}),Object(C.jsxs)("div",{className:"inputs_ctr",children:[Object(C.jsxs)("div",{className:"inpts_on_left",children:[Object(C.jsx)(te.a,{id:"combo-box-demo",options:this.state.products,getOptionLabel:function(e){return"".concat(e.product_generic_name," ").concat(e.product_description_name)},onChange:this.handleChangeDrugName,onKeyUp:this.handleDrugNameKeyUp,style:{width:"85%",margin:"20px"},renderInput:function(e){return Object(C.jsx)(T.a,Object(g.a)(Object(g.a)({},e),{},{label:"Search Product",name:"product_name",variant:"outlined"}))}}),Object(C.jsx)(T.a,{disabled:!this.state.active_drug,type:"number",name:"qty_available",variant:"outlined",label:"Available",value:this.state.active_product_qty,style:{width:"85%",margin:"20px"}})]}),Object(C.jsxs)("div",{className:"inpts_on_right",children:[Object(C.jsxs)(B.a,{variant:"outlined",label:"selling_unit",disabled:!this.state.active_drug,style:{width:"85%",margin:"20px"},children:[Object(C.jsx)(H.a,{id:"selling_unit",children:"Selling Unit"}),Object(C.jsx)(K.a,{inputProps:{name:"selling_unit"},label:"Selling Unit",id:"select_selling_unit",value:this.state.active_selling_unit,onChange:function(){var t=Object(v.a)(m.a.mark((function t(a,s){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState(Object(g.a)(Object(g.a)({},e.state),{},{active_selling_price:JSON.parse(e.state.active_drug.product_units).find((function(e){return e.selling_unit===a.target.value}))[e.state.active_sale_type]}));case 2:e.setState(Object(g.a)(Object(g.a)({},e.state),{},{active_selling_unit:a.target.value}),(function(){e.setState(Object(g.a)(Object(g.a)({},e.state),{},{active_product_qty:e.state.active_selling_unit===JSON.parse(e.state.active_drug.product_units)[0].selling_unit?parseInt(e.state.active_drug.product_qty):parseInt(e.state.active_drug.product_qty)/parseInt(JSON.parse(e.state.active_drug.product_units).find((function(e){return e.selling_unit===a.target.value})).qty)}))}));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),children:this.state.active_drug?JSON.parse(this.state.active_drug.product_units).map((function(e,t){return Object(C.jsx)(_.a,{value:e.selling_unit,children:e.selling_unit},t)})):Object(C.jsx)(_.a,{value:"",children:"No Selling Units"})})]}),Object(C.jsx)(T.a,{disabled:!this.state.active_drug,error:this.state.over_qty_error,type:"number",name:"qty",variant:"outlined",label:"Quantity",helperText:this.state.over_qty_error?"Quantity Exceeds Available":"",defaultValue:1,onChange:function(){var t=Object(v.a)(m.a.mark((function t(a){var s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(parseInt(a.target.value)>e.state.active_product_qty)){t.next=4;break}e.setState(Object(g.a)(Object(g.a)({},e.state),{},{over_qty_error:!0})),t.next=11;break;case 4:return t.next=6,W.data("/user/sale/batch/".concat(e.state.active_drug.product_id,"/",1));case 6:if("Error"===(s=t.sent)||0===s.length){t.next=10;break}return t.next=10,e.setState(Object(g.a)(Object(g.a)({},e.state),{},{batch_qty:parseInt(s[0].sum)}),Object(v.a)(m.a.mark((function t(){var s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(parseInt(a.target.value)>=e.state.batch_qty)){t.next=5;break}return t.next=3,W.data("/user/sale/batch/".concat(e.state.active_drug.product_id,"/").concat(e.state.batch_index+1));case 3:"Error"!==(s=t.sent)&&0!==s.length&&e.setState(Object(g.a)(Object(g.a)({},e.state),{},{batch_index:e.state.batch_index+1,batch_qty:parseInt(s[s.length-1].sum)}));case 5:case"end":return t.stop()}}),t)}))));case 10:e.setState(Object(g.a)(Object(g.a)({},e.state),{},{over_qty_error:!1}));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),style:{width:"85%",margin:"20px"}}),Object(C.jsx)("input",{hidden:!0,type:"text",name:"product_id",defaultValue:this.state.active_drug?this.state.active_drug.product_id:""}),Object(C.jsx)("input",{hidden:!0,type:"text",name:"product_price",defaultValue:this.state.active_selling_price}),Object(C.jsx)("input",{hidden:!0,type:"text",name:"product_batch_index",value:this.state.batch_index,readOnly:!0})]})]})]})})})]}),Object(C.jsxs)("form",{className:"card",style:{marginTop:"20px"},onSubmit:this.handleSale,children:[Object(C.jsxs)("div",{className:"card-header card-header-payments",children:[Object(C.jsx)("h3",{className:"class_payment_header",children:"Payment"}),Object(C.jsxs)("div",{className:"",children:[Object(C.jsx)(se.a,{trigger:function(){return Object(C.jsxs)(f.a,{variant:"contained",color:"primary",style:{marginRight:10},children:[Object(C.jsx)("span",{style:{fontSize:"17.5px",marginRight:"10px"},children:Object(C.jsx)("i",{className:"las la-print"})}),"Print"]})},content:function(){return e.componentRef}}),Object(C.jsxs)(f.a,{type:"submit",variant:"contained",color:"primary",children:["Finish Sale",Object(C.jsx)("span",{style:{fontSize:"15px",marginLeft:"10px"},children:Object(C.jsx)("i",{className:"las la-angle-double-right"})})]})]})]}),Object(C.jsx)(Ue,{t:this.getTotals()})]})]})]})})]}),Object(C.jsx)("div",{style:{display:"none"},children:this.state.print?Object(C.jsx)(ce,{ref:function(t){return e.componentRef=t},data:this.state.formData}):Object(C.jsx)(C.Fragment,{})})]})}}]),a}(s.Component);function Ue(e){var t=e.t,a=Object(s.useState)(0),c=Object(A.a)(a,2),n=c[0],r=c[1];return Object(C.jsxs)("div",{className:"_finish_purchase_ctr",children:[Object(C.jsx)(T.a,{name:"total_amount",variant:"outlined",label:"Total",value:t,style:{width:"75%",margin:"20px"}}),Object(C.jsx)(T.a,{name:"discount",variant:"outlined",label:"Discount",type:"number",onChange:function(e){r(parseInt(e.target.value)||0)},style:{width:"75%",margin:"20px"}}),Object(C.jsx)(T.a,{name:"pay_amount",variant:"outlined",label:"Amount to Be Paid",value:t-n,style:{width:"75%",margin:"20px"}}),Object(C.jsx)(B.a,{style:{width:"75%",marginLeft:"20px",marginBottom:"50px"},children:Object(C.jsx)(G.a,{children:Object(C.jsx)(Y.a,{control:Object(C.jsx)(Z.a,{defaultChecked:!0,name:"print_receipt"}),label:"Print Receipt"})})})]})}function Te(e){return Object(C.jsx)($.a,Object(g.a)({elevation:6,variant:"filled"},e))}var qe=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).handleClose=function(){s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!1}))},s.handleDelete=Object(v.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open_del:!0,messageState:"info"})),e.next=3,W.data("/user/all/delete/".concat(s.state.product_id));case 3:!0===(t=e.sent).status?(s.setState(Object(g.a)(Object(g.a)({},s.state),{},{message:t.data,messageState:"success"})),setTimeout((function(){window.location.reload()}),500)):s.setState(Object(g.a)(Object(g.a)({},s.state),{},{message:t.data,messageState:"error"}));case 5:case"end":return e.stop()}}),e)}))),s.closePopUp=function(e,t){"clickaway"!==t&&s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open_del:!1,message:"Please Wait...",messageState:"info"}))},s.state={products:[],open:!1,open_del:!1,message:"Please Wait...",messageState:""},s.products(),s}return Object(l.a)(a,[{key:"products",value:function(){var e=Object(v.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.data("/user/all/products");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:(t=e.t0)&&this.setState(Object(g.a)(Object(g.a)({},this.state),{},{products:"Error"===t?[]:t}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(J.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.open,autoHideDuration:5e3,onClose:this.closePopUp,action:Object(C.jsx)(c.a.Fragment,{children:Object(C.jsx)(L.a,{size:"small","aria-label":"close",color:"inherit",onClick:this.closePopUp,children:Object(C.jsx)("i",{className:"las la-times"})})}),children:Object(C.jsx)(Te,{onClose:this.closePopUp,severity:this.state.messageState,children:this.state.message})}),Object(C.jsx)("input",{type:"checkbox",id:"nav-toggle",defaultChecked:!0}),Object(C.jsx)(ge,{active:"dashboard"}),Object(C.jsxs)("div",{className:"main-content",children:[Object(C.jsx)(ve,{}),Object(C.jsx)("main",{children:Object(C.jsx)("div",{className:"fullwidth-ctr",children:Object(C.jsx)("div",{className:"projects",children:Object(C.jsxs)("div",{className:"card",children:[Object(C.jsx)("div",{className:"card-header",children:Object(C.jsx)(T.a,{name:"drug_name",variant:"outlined",label:"Search Batch",style:{width:"15%"},onKeyUp:function(){var t=Object(v.a)(m.a.mark((function t(a){var s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,W.data("/user/all/search_batch/".concat(a.target.value));case 2:"Error"!==(s=t.sent)&&e.setState(Object(g.a)(Object(g.a)({},e.state),{},{products:"Error"===s?[]:s}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})}),Object(C.jsx)("div",{className:"card-body",children:Object(C.jsxs)("table",{width:"100%",children:[Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:"Product Generic Name"}),Object(C.jsx)("td",{children:"Product Description"}),Object(C.jsx)("td",{children:"Quantity"}),Object(C.jsx)("td",{}),Object(C.jsx)("td",{})]})}),Object(C.jsx)("tbody",{children:0===this.state.products.length?Object(C.jsx)("tr",{children:Object(C.jsx)("td",{children:"No Product Exists"})}):this.state.products.map((function(t,a){return Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:t.product_generic_name}),Object(C.jsx)("td",{children:t.product_description_name}),Object(C.jsx)("td",{children:t.product_qty}),Object(C.jsx)("td",{children:Object(C.jsx)(O.b,{to:"/edit-product?product-id=".concat(t.product_id),children:Object(C.jsx)(f.a,{variant:"contained",color:"primary",children:"Edit"})})}),Object(C.jsx)("td",{children:Object(C.jsx)(f.a,{variant:"contained",style:{color:"red"},onClick:function(){e.setState(Object(g.a)(Object(g.a)({},e.state),{},{open:!0,product_id:t.product_id}))},children:"Delete"})})]},a)})}))})]})})]})})})})]}),this.state.product_id?Object(C.jsxs)(S.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"form-dialog-title",children:[Object(C.jsx)(w.a,{id:"form-dialog-title",children:"Want to Delete Product?"}),Object(C.jsx)(N.a,{children:Object(C.jsx)(D.a,{children:"Press OK and Continue. This process is Irreversible"})}),Object(C.jsxs)(k.a,{children:[Object(C.jsx)(f.a,{onClick:this.handleClose,color:"primary",children:"Cancel"}),Object(C.jsx)(f.a,{onClick:this.handleDelete,color:"primary",children:"OK"})]})]}):Object(C.jsx)(C.Fragment,{})]})}}]),a}(s.Component);function Ie(e){return Object(C.jsx)($.a,Object(g.a)({elevation:6,variant:"filled"},e))}var Fe=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).handlePurchase=function(){var e=Object(v.a)(m.a.mark((function e(t){var a,c,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!0,messageState:"info"})),a=new FormData(t.target),c={},a.forEach((function(e,t){c[t]=e})),e.next=7,s.setState(Object(g.a)(Object(g.a)({},s.state),{},{_content:c}));case 7:return 0!==s.state.formData.length&&s.setState(Object(g.a)(Object(g.a)({},s.state),{},{_content:Object(g.a)(Object(g.a)({},s.state._content),{},{products_purchased:s.state.formData,date:Date.now()})})),n=new ee,e.next=11,n.post("/user/sale/new_purchase",s.state._content);case 11:!0===(r=e.sent).status?(s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!0,message:r.data,messageState:"success"})),setTimeout((function(){window.location.reload()}),500)):s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!0,message:r.data,messageState:"error"}));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.handleSubmit=function(){var e=Object(v.a)(m.a.mark((function e(t){var a,c,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!0,messageState:"info"})),a=new FormData(t.target),c={},a.forEach((function(e,t){c[t]=e})),n=s.state.formData.find((function(e){return e.product_name===c.product_name})),c.batch_no&&c.expiry_date&&c.qty&&c.cost_price){e.next=9;break}return s.setState(Object(g.a)(Object(g.a)({},s.state),{},{empty_error:!0,open:!0,messageState:"error",message:"Some Fields are missing"})),e.abrupt("return");case 9:n?s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!0,message:"Product Exists",messageState:"warning"})):s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!0,message:"Product Added",messageState:"success",formData:[].concat(Object(Q.a)(s.state.formData),[c])}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.handleDrugNameKeyUp=function(){var e=Object(v.a)(m.a.mark((function e(t,a){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.target.value){e.next=9;break}return e.next=3,W.data("/user/sale/products/".concat(t.target.value));case 3:if(e.t1=e.sent,e.t1){e.next=6;break}e.t1=[];case 6:e.t0=e.t1,e.next=10;break;case 9:e.t0=[];case 10:(c=e.t0)&&s.setState(Object(g.a)(Object(g.a)({},s.state),{},{products:"Error"===c?[]:c}));case 12:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),s.handleChangeDrugName=function(e,t){t&&s.setState(Object(g.a)(Object(g.a)({},s.state),{},{active_drug:t}),(function(){var e=JSON.parse(s.state.active_drug.product_units);s.setState(Object(g.a)(Object(g.a)({},s.state),{},{active_selling_unit:e[e.length-1].selling_unit,active_retail_price:e[e.length-1].retail,active_wholesale_price:e[e.length-1].wholesale}))}))},s.closePopUp=function(e,t){"clickaway"!==t&&(s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!1,message:""})),s.state.empty_error&&s.setState(Object(g.a)(Object(g.a)({},s.state),{},{empty_error:!1})))},s.state={open:!1,message:"Please Wait...",messageState:"",_content:{},active_selling_unit:"",active_wholesale_price:"",empty_error:!1,products:[],suppliers:[],formData:[],total:0,discount:0},s.suppliers(),s}return Object(l.a)(a,[{key:"suppliers",value:function(){var e=Object(v.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.data("/user/all/suppliers");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:(t=e.t0)&&this.setState(Object(g.a)(Object(g.a)({},this.state),{},{suppliers:"Error"===t?[]:t}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getTotals",value:function(){var e=0;return 0!==this.state.formData.length&&this.state.formData.forEach((function(t){e+=parseInt(t.cost_price)*parseInt(t.qty)})),e}},{key:"render",value:function(){var e=this;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(J.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.open,autoHideDuration:5e3,onClose:this.closePopUp,action:Object(C.jsx)(c.a.Fragment,{children:Object(C.jsx)(L.a,{size:"small","aria-label":"close",color:"inherit",onClick:this.closePopUp,children:Object(C.jsx)("i",{className:"las la-times"})})}),children:Object(C.jsx)(Ie,{onClose:this.closePopUp,severity:this.state.messageState,children:this.state.message})}),Object(C.jsx)("input",{type:"checkbox",id:"nav-toggle",defaultChecked:!0}),Object(C.jsx)(ge,{active:"purchase"}),Object(C.jsxs)("div",{className:"main-content",children:[Object(C.jsx)(ve,{}),Object(C.jsx)("main",{children:Object(C.jsxs)("div",{className:"recent-grid-left",children:[Object(C.jsxs)("div",{className:"card",children:[Object(C.jsxs)("div",{className:"card-header",children:[Object(C.jsx)("h3",{children:"Purchase List"}),Object(C.jsxs)(f.a,{variant:"contained",color:"primary",style:{marginRight:10},onClick:function(){window.location.reload()},children:[Object(C.jsx)("span",{style:{fontSize:"17.5px",marginRight:"10px"},children:Object(C.jsx)("i",{className:"las la-redo"})}),"Cancel"]})]}),Object(C.jsx)("div",{className:"card-body tbl_ctr",children:Object(C.jsxs)("table",{width:"100%",children:[Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:"Name"}),Object(C.jsx)("td",{children:"Qty"}),Object(C.jsx)("td",{children:"Batch No."}),Object(C.jsx)("td",{children:"Expiry Date"}),Object(C.jsx)("td",{children:"Cost Price(Shs)"})]})}),Object(C.jsx)("tbody",{children:0===this.state.formData.length?Object(C.jsx)("tr",{children:Object(C.jsx)("td",{children:"No Product Added"})}):this.state.formData.map((function(t,a){return Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{className:"name_cell",children:t.product_name}),Object(C.jsx)("td",{children:t.qty}),Object(C.jsx)("td",{children:t.batch_no}),Object(C.jsx)("td",{children:t.expiry_date}),Object(C.jsx)("td",{children:parseInt(t.cost_price)*parseInt(t.qty)}),Object(C.jsx)("td",{children:Object(C.jsx)(f.a,{variant:"contained",color:"primary",onClick:function(){var t=e.state.formData;t.splice(a,1),e.setState(Object(g.a)(Object(g.a)({},e.state),{},{formData:t}))},children:"Remove"})})]},a)}))}),Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{}),Object(C.jsx)("td",{}),Object(C.jsx)("td",{}),Object(C.jsx)("td",{children:"Total"}),Object(C.jsx)("td",{children:this.getTotals()})]})})]})})]}),Object(C.jsxs)("div",{className:"projects",children:[Object(C.jsxs)("form",{className:"card",autoComplete:"off",onSubmit:this.handleSubmit,children:[Object(C.jsxs)("div",{className:"card-header card-header-payments",children:[Object(C.jsx)("h3",{className:"class_payment_header",children:"New Purchase"}),Object(C.jsx)("div",{className:"",children:Object(C.jsxs)(f.a,{type:"submit","aria-describedby":this.id,variant:"contained",color:"primary",children:[Object(C.jsx)("span",{style:{fontSize:"17.5px",marginRight:"10px"},children:Object(C.jsx)("i",{className:"las la-plus-circle"})}),"Add"]})})]}),Object(C.jsx)("div",{className:"card-body",children:Object(C.jsx)("div",{children:Object(C.jsxs)("div",{className:"inputCtr",children:[Object(C.jsx)("h4",{children:"Product Details"}),Object(C.jsxs)("div",{className:"inputs_ctr",children:[Object(C.jsxs)("div",{className:"inpts_on_left",children:[Object(C.jsx)(te.a,{id:"combo-box-demo",options:this.state.products,getOptionLabel:function(e){return"".concat(e.product_generic_name," ").concat(e.product_description_name)},onChange:this.handleChangeDrugName,onKeyUp:this.handleDrugNameKeyUp,style:{width:"85%",margin:"20px"},renderInput:function(e){return Object(C.jsx)(T.a,Object(g.a)(Object(g.a)({},e),{},{label:"Search Product",name:"product_name",variant:"outlined"}))}}),Object(C.jsx)(T.a,{error:this.state.empty_error,name:"batch_no",variant:"outlined",label:"Batch Number",style:{width:"85%",margin:"20px"}}),Object(C.jsx)(T.a,{error:this.state.empty_error,type:"date",name:"expiry_date",variant:"outlined",helperText:"Expiry Date",style:{width:"85%",margin:"20px"}}),Object(C.jsxs)(B.a,{variant:"outlined",label:"supplier",style:{width:"85%",margin:"20px"},children:[Object(C.jsx)(H.a,{id:"supplier",children:"Supplier"}),Object(C.jsx)(K.a,{inputProps:{name:"supplier"},label:"supplier",id:"select_supplier",defaultValue:"",children:0===this.state.suppliers.length?"No Supplier Added":this.state.suppliers.map((function(e,t){return Object(C.jsx)(_.a,{value:e.supplier_id,children:e.supplier_surname},t)}))})]})]}),Object(C.jsxs)("div",{className:"inpts_on_right",children:[Object(C.jsxs)(B.a,{variant:"outlined",label:"selling_unit",disabled:!this.state.active_drug,style:{width:"85%",margin:"20px"},children:[Object(C.jsx)(H.a,{id:"selling_unit",children:"Purchasing Unit"}),Object(C.jsx)(K.a,{inputProps:{name:"selling_unit"},label:"Purchasing Unit",id:"select_selling_unit",value:this.state.active_selling_unit,onChange:function(t,a){var s=JSON.parse(e.state.active_drug.product_units);e.setState(Object(g.a)(Object(g.a)({},e.state),{},{active_retail_price:s.find((function(e){return e.selling_unit===t.target.value})).retail,active_wholesale_price:s.find((function(e){return e.selling_unit===t.target.value})).wholesale})),e.setState(Object(g.a)(Object(g.a)({},e.state),{},{active_selling_unit:t.target.value}))},children:this.state.active_drug?JSON.parse(this.state.active_drug.product_units).map((function(e,t){return Object(C.jsx)(_.a,{value:e.selling_unit,children:e.selling_unit},t)})):Object(C.jsx)(_.a,{value:"",children:"No Selling Units"})})]}),Object(C.jsx)(T.a,{error:this.state.empty_error,type:"number",name:"qty",variant:"outlined",label:"Quantity",defaultValue:1,style:{width:"85%",margin:"20px"}}),Object(C.jsx)(T.a,{error:this.state.empty_error,name:"cost_price",variant:"outlined",type:"number",label:"Unit Cost Price(Ushs)",style:{width:"85%",margin:"20px"}}),Object(C.jsx)("input",{hidden:!0,type:"text",name:"product_id",defaultValue:this.state.active_drug?this.state.active_drug.product_id:""})]})]})]})})})]}),Object(C.jsxs)("form",{className:"card",style:{marginTop:"20px"},onSubmit:this.handlePurchase,children:[Object(C.jsxs)("div",{className:"card-header card-header-payments",children:[Object(C.jsx)("h3",{className:"class_payment_header",children:"Payment"}),Object(C.jsxs)("div",{className:"",children:[Object(C.jsx)(se.a,{trigger:function(){return Object(C.jsxs)(f.a,{variant:"contained",color:"primary",style:{marginRight:10},children:[Object(C.jsx)("span",{style:{fontSize:"17.5px",marginRight:"10px"},children:Object(C.jsx)("i",{className:"las la-print"})}),"Print"]})},content:function(){return e.componentRef}}),Object(C.jsxs)(f.a,{type:"submit",variant:"contained",color:"primary",children:["Finish Purchase",Object(C.jsx)("span",{style:{fontSize:"15px",marginLeft:"10px"},children:Object(C.jsx)("i",{className:"las la-angle-double-right"})})]})]})]}),Object(C.jsx)(Ee,{t:this.getTotals()})]})]})]})})]}),Object(C.jsx)("div",{style:{display:"none"},children:Object(C.jsx)(ce,{ref:function(t){return e.componentRef=t},data:this.state.formData})})]})}}]),a}(s.Component);function Ee(e){var t=e.t,a=Object(s.useState)(0),c=Object(A.a)(a,2),n=c[0],r=c[1];return Object(C.jsxs)("div",{className:"_finish_purchase_ctr",children:[Object(C.jsx)(T.a,{name:"total_amount",variant:"outlined",label:"Total",value:t,style:{width:"75%",margin:"20px"}}),Object(C.jsx)(T.a,{name:"discount",variant:"outlined",label:"Discount",type:"number",onChange:function(e){r(parseInt(e.target.value)||0)},style:{width:"75%",margin:"20px"}}),Object(C.jsx)(T.a,{name:"pay_amount",variant:"outlined",label:"Amount to Be Paid",value:t-n,style:{width:"75%",margin:"20px"}}),Object(C.jsx)(B.a,{style:{width:"75%",marginLeft:"20px",marginBottom:"50px"},children:Object(C.jsx)(G.a,{children:Object(C.jsx)(Y.a,{control:Object(C.jsx)(Z.a,{defaultChecked:!0,name:"print_receipt"}),label:"Print Receipt"})})})]})}function We(e){return Object(C.jsx)($.a,Object(g.a)({elevation:6,variant:"filled"},e))}var Re=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={open:!1,message:"Please Wait...",messageState:"",product:{}},s.product(),s}return Object(l.a)(a,[{key:"product",value:function(){var e=Object(v.a)(m.a.mark((function e(){var t,a,s,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=parseInt(new URLSearchParams(window.location.search).get("product-id")),e.next=3,W.data("/user/all/product/".concat(t));case 3:a=e.sent,s=Object(A.a)(a,1),(c=s[0])&&this.setState(Object(g.a)(Object(g.a)({},this.state),{},{product:"Error"===c?{}:c}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(J.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.open,autoHideDuration:5e3,onClose:this.closePopUp,action:Object(C.jsx)(c.a.Fragment,{children:Object(C.jsx)(L.a,{size:"small","aria-label":"close",color:"inherit",onClick:this.closePopUp,children:Object(C.jsx)("i",{className:"las la-times"})})}),children:Object(C.jsx)(We,{onClose:this.closePopUp,severity:this.state.messageState,children:this.state.message})}),Object(C.jsx)("input",{type:"checkbox",id:"nav-toggle",defaultChecked:!0}),Object(C.jsx)(ge,{active:"dashboard"}),Object(C.jsxs)("div",{className:"main-content",children:[Object(C.jsx)(ve,{}),Object(C.jsx)("main",{children:Object(C.jsx)("div",{className:"fullwidth-ctr",children:Object(C.jsx)("div",{className:"projects",children:Object(C.jsxs)("div",{className:"card",children:[Object(C.jsx)("div",{className:"",style:{borderBottom:"1px solid #f0f0f0",padding:"1rem"},children:Object(C.jsxs)("div",{className:"form-header-ctr",children:[Object(C.jsx)("div",{className:"",children:Object(C.jsx)("h3",{children:"Product Details"})}),Object(C.jsx)("div",{className:"",children:Object(C.jsx)(f.a,{type:"submit","aria-describedby":this.id,variant:"contained",color:"primary",style:{marginInline:10},children:"Print"})})]})}),Object(C.jsx)("div",{className:"card-body",children:Object(C.jsx)("div",{children:Object(C.jsxs)("div",{className:"inputCtr",children:[Object(C.jsx)("div",{className:"inputs_ctr",children:Object(C.jsxs)("table",{width:"100%",children:[Object(C.jsxs)("tr",{children:[Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Product Name :"}),this.state.product.product_name]}),Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Quantity in Stock :"}),this.state.product.quantity]})]}),Object(C.jsxs)("tr",{children:[Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Unit Price :"}),"UGX","",this.state.product.unit_price]}),Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Cost Price :"}),"UGX"," ","",this.state.product.cost_price]})]}),Object(C.jsxs)("tr",{children:[Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Date Added :"}),new Date(this.state.product.date_added).getDate()+"-"+(new Date(this.state.product.date_added).getMonth()+1)+"-"+new Date(this.state.product.date_added).getFullYear()]}),Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Time :"}),new Date(this.state.product.date_added).getHours()+":"+new Date(this.state.product.date_added).getMinutes()+(new Date(this.state.product.date_added).getHours()<12?"AM":"PM")]})]}),Object(C.jsxs)("tr",{children:[Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Expiry Date :"}),this.state.product.expiry_date]}),Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Description :"}),this.state.product.product_description]})]})]})}),Object(C.jsx)("h5",{children:"Supplier"}),Object(C.jsx)("div",{className:"inputs_ctr",children:Object(C.jsxs)("table",{width:"100%",children:[Object(C.jsxs)("tr",{children:[Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Surname :"}),this.state.product.supplier_surname]}),Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Lastname :"}),this.state.product.supplier_lastname]})]}),Object(C.jsxs)("tr",{children:[Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Date Added :"}),new Date(this.state.product.date_registered).getDate()+"-"+(new Date(this.state.product.date_registered).getMonth()+1)+"-"+new Date(this.state.product.date_registered).getFullYear()]}),Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Time :"}),new Date(this.state.product.date_registered).getHours()+":"+new Date(this.state.product.date_registered).getMinutes()+(new Date(this.state.product.date_registered).getHours()<12?"AM":"PM")]})]}),Object(C.jsxs)("tr",{children:[Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Contact :"}),this.state.product.supplier_contact]}),Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Location :"}),this.state.product.supplier_location]})]}),Object(C.jsx)("tr",{children:Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Address :"}),this.state.product.supplier_address]})})]})})]})})})]})})})})]})]})}}]),a}(s.Component);function ze(e){return Object(C.jsx)($.a,Object(g.a)({elevation:6,variant:"filled"},e))}var Me=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).handleSubmit=function(){var e=Object(v.a)(m.a.mark((function e(t){var a,c,n,r,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!0,messageState:"info"})),a=new FormData(t.target),c={},a.forEach((function(e,t){c[t]=e})),n=parseInt(new URLSearchParams(window.location.search).get("product-id")),c.units=s.state.units,r=new ee,e.next=10,r.post("/user/sale/edit_product/".concat(n),c);case 10:!0===(i=e.sent).status?(s.setState(Object(g.a)(Object(g.a)({},s.state),{},{message:i.data,messageState:"success"})),setTimeout((function(){window.location.reload()}),500)):s.setState(Object(g.a)(Object(g.a)({},s.state),{},{message:i.data,messageState:"error"}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.closePopUp=function(e,t){"clickaway"!==t&&s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open:!1}))},s.state={open:!1,message:"Please Wait...",messageState:"",product:{},units:[],new_unit_error:!1,selling_units:[]},s.product(),s}return Object(l.a)(a,[{key:"product",value:function(){var e=Object(v.a)(m.a.mark((function e(){var t,a,s,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=parseInt(new URLSearchParams(window.location.search).get("product-id")),e.next=3,W.data("/user/all/product/".concat(t));case 3:a=e.sent,s=Object(A.a)(a,1),(c=s[0])&&this.setState(Object(g.a)(Object(g.a)({},this.state),{},{product:"Error"===c?{}:c}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(J.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.open,autoHideDuration:5e3,onClose:this.closePopUp,action:Object(C.jsx)(c.a.Fragment,{children:Object(C.jsx)(L.a,{size:"small","aria-label":"close",color:"inherit",onClick:this.closePopUp,children:Object(C.jsx)("i",{className:"las la-times"})})}),children:Object(C.jsx)(ze,{onClose:this.closePopUp,severity:this.state.messageState,children:this.state.message})}),Object(C.jsx)("input",{type:"checkbox",id:"nav-toggle",defaultChecked:!0}),Object(C.jsx)(ge,{active:"dashboard"}),Object(C.jsxs)("div",{className:"main-content",children:[Object(C.jsx)(ve,{}),Object(C.jsx)("main",{children:Object(C.jsx)("div",{className:"fullwidth-ctr",children:Object(C.jsx)("div",{className:"projects",children:Object(C.jsxs)("form",{className:"card",autoComplete:"off",onSubmit:this.handleSubmit,children:[Object(C.jsx)("div",{className:"",style:{borderBottom:"1px solid #f0f0f0",padding:"1rem"},children:Object(C.jsxs)("div",{className:"form-header-ctr",children:[Object(C.jsx)("div",{className:"",children:Object(C.jsx)("h3",{children:"Edit Product"})}),Object(C.jsxs)("div",{className:"",children:[Object(C.jsx)(f.a,{"aria-describedby":this.id,variant:"contained",color:"primary",style:{marginInline:10},onClick:function(){window.location.reload()},children:"Cancel"}),Object(C.jsx)(f.a,{type:"submit","aria-describedby":this.id,variant:"contained",color:"primary",style:{marginInline:10},children:"Save"})]})]})}),Object(C.jsx)("div",{className:"card-body",children:Object(C.jsx)("div",{children:Object(C.jsxs)("div",{className:"inputCtr",children:[Object(C.jsx)("h4",{children:"Medicine Entry"}),Object(C.jsxs)("div",{className:"inputs_ctr_np",children:[Object(C.jsxs)("div",{className:"inputs_left_np",children:[Object(C.jsx)(T.a,{name:"trade_name",variant:"outlined",helperText:"Trade Name",value:this.state.product.product_generic_name,style:{width:"75%",margin:"20px"},onChange:function(t){e.setState(Object(g.a)(Object(g.a)({},e.state),{},{product:Object(g.a)(Object(g.a)({},e.state.product),{},{product_generic_name:t.target.value})}))}}),Object(C.jsx)(T.a,{name:"generic_name",variant:"outlined",helperText:"Generic Name",value:this.state.product.product_generic_name,style:{width:"75%",margin:"20px"},onChange:function(t){e.setState(Object(g.a)(Object(g.a)({},e.state),{},{product:Object(g.a)(Object(g.a)({},e.state.product),{},{product_generic_name:t.target.value})}))}}),Object(C.jsx)(T.a,{name:"description",variant:"outlined",helperText:"Medicine Description",value:this.state.product.product_description_name,style:{width:"75%",margin:"20px"},onChange:function(t){e.setState(Object(g.a)(Object(g.a)({},e.state),{},{product:Object(g.a)(Object(g.a)({},e.state.product),{},{product_description:t.target.value})}))}})]}),Object(C.jsxs)("div",{className:"inputs_right_np",children:[Object(C.jsx)("h4",{style:{margin:"20px"},children:"Selling Units"}),Object(C.jsx)("div",{className:"tbl_ctr_np",children:Object(C.jsxs)("table",{width:"100%",children:[Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:"Selling Unit"}),Object(C.jsx)("td",{children:"Quantity"}),Object(C.jsx)("td",{children:"Retail"}),Object(C.jsx)("td",{children:"Wholesale"})]})}),Object(C.jsx)("tbody",{children:0===this.state.units.length?Object(C.jsx)("tr",{children:Object(C.jsx)("td",{children:"No Selected Units"})}):this.state.units.map((function(t,a){return Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:Object(C.jsxs)(B.a,{error:e.state.new_unit_error,variant:"standard",label:"supplier",style:{width:"95%"},children:[Object(C.jsx)(H.a,{id:"selling_unit",children:0===a?"Smallest Unit":"Unit ".concat(a+1)}),Object(C.jsx)(K.a,{inputProps:{name:"selling_unit"},label:0===a?"Smallest Unit":"Unit ".concat(a+1),id:"select_selling_unit",defaultValue:"",onChange:function(t){var s=e.state.units;s[a].selling_unit=t.target.value,e.setState(Object(g.a)(Object(g.a)({},e.state),{},{units:s}))},children:0===e.state.selling_units.length?"No Unit Added":e.state.selling_units.map((function(e,t){return Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(_.a,{value:e.unit_name,children:e.unit_name},t)})}))})]})}),Object(C.jsx)("td",{children:Object(C.jsx)(T.a,{multiline:!0,variant:"standard",defaultValue:0===a?"1":"",label:0===a?"Quantity":"Quantity In Unit ".concat(a),onChange:function(t){var s=e.state.units;s[a].qty=t.target.value,e.setState(Object(g.a)(Object(g.a)({},e.state),{},{units:s}))},style:{width:"95%"}})}),Object(C.jsx)("td",{children:Object(C.jsx)(T.a,{variant:"standard",label:"Retail",error:e.state.new_unit_error,onChange:function(t){var s=e.state.units;s[a].retail=t.target.value,e.setState(Object(g.a)(Object(g.a)({},e.state),{},{units:s}))},style:{width:"95%"}})}),Object(C.jsx)("td",{children:Object(C.jsx)(T.a,{variant:"standard",label:"Wholesale",error:e.state.new_unit_error,onChange:function(t){var s=e.state.units;s[a].wholesale=t.target.value,e.setState(Object(g.a)(Object(g.a)({},e.state),{},{units:s}))},style:{width:"95%"}})})]},a)}))})]})}),Object(C.jsx)("div",{className:"",style:{display:"flex",justifyContent:"flex-end",width:"95%",margin:"10px auto"},children:Object(C.jsx)(f.a,{variant:"contained",color:"primary",onClick:function(){if(0===e.state.units.length)e.setState(Object(g.a)(Object(g.a)({},e.state),{},{units:[].concat(Object(Q.a)(e.state.units),[{qty:1}])}));else if(1===e.state.units.length){var t=e.state.units;t[0].selling_unit&&t[0].qty&&t[0].retail&&t[0].wholesale?e.setState(Object(g.a)(Object(g.a)({},e.state),{},{units:[].concat(Object(Q.a)(e.state.units),[{}]),new_unit_error:!1})):e.setState(Object(g.a)(Object(g.a)({},e.state),{},{new_unit_error:!0,open:!0,message:"Some Fields are missing",messageState:"error"}))}else{var a=e.state.units;a[a.length-1].selling_unit&&a[a.length-1].qty&&a[a.length-1].retail&&a[a.length-1].wholesale?parseInt(a[a.length-1].qty)*parseInt(a[a.length-2].retail)===parseInt(a[a.length-1].retail)||parseInt(a[a.length-1].qty)*parseInt(a[a.length-2].wholesale)===parseInt(a[a.length-1].wholesale)?e.setState(Object(g.a)(Object(g.a)({},e.state),{},{units:[].concat(Object(Q.a)(e.state.units),[{}]),new_unit_error:!1})):e.setState(Object(g.a)(Object(g.a)({},e.state),{},{new_unit_error:!0,open:!0,message:"Unit Prices Mismatch",messageState:"error"})):e.setState(Object(g.a)(Object(g.a)({},e.state),{},{new_unit_error:!0,open:!0,message:"Some Fields are Missing",messageState:"error"}))}},children:"New Unit"})})]})]})]})})})]})})})})]})]})}}]),a}(s.Component);function Xe(e){return Object(C.jsx)($.a,Object(g.a)({elevation:6,variant:"filled"},e))}var Ve=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).handlePurchaseClose=function(){s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open_purchase:!1}))},s.handleSaleClose=function(){s.setState(Object(g.a)(Object(g.a)({},s.state),{},{open_sale:!1}))},s.state={open:!1,open_purchase:!1,open_sale:!1,message:"Please Wait...",messageState:"",income:0,today_income:0,expenses:0,today_expense:0,sales:[],purchases:[]},s.income(),s.expenses(),s}return Object(l.a)(a,[{key:"income",value:function(){var e=Object(v.a)(m.a.mark((function e(){var t,a,s,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.data("/user/all/sales");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:t=e.t0,a=0,s=0,c=[],"Error"===t?this.setState(Object(g.a)(Object(g.a)({},this.state),{},{income:0,sales:[]})):t.forEach((function(e){a+=e.amount_paid,new Date(parseInt(e.sales_date)).getDate()===new Date(Date.now()).getDate()&&(s+=e.amount_paid,c.push(e))})),this.setState(Object(g.a)(Object(g.a)({},this.state),{},{today_income:s,income:a,sales:c}));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"expenses",value:function(){var e=Object(v.a)(m.a.mark((function e(){var t,a,s,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.data("/user/all/purchases");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:t=e.t0,a=0,s=0,c=[],"Error"===t?this.setState(Object(g.a)(Object(g.a)({},this.state),{},{expenses:0,purchases:[]})):t.forEach((function(e){a+=e.purchase_amount,new Date(parseInt(e.purchase_date)).getDate()===new Date(Date.now()).getDate()&&(s+=e.purchase_amount,c.push(e))})),this.setState(Object(g.a)(Object(g.a)({},this.state),{},{today_expense:s,expenses:a,purchases:c}));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(J.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.open,autoHideDuration:5e3,onClose:this.closePopUp,action:Object(C.jsx)(c.a.Fragment,{children:Object(C.jsx)(L.a,{size:"small","aria-label":"close",color:"inherit",onClick:this.closePopUp,children:Object(C.jsx)("i",{className:"las la-times"})})}),children:Object(C.jsx)(Xe,{onClose:this.closePopUp,severity:this.state.messageState,children:this.state.message})}),Object(C.jsx)("input",{type:"checkbox",id:"nav-toggle",defaultChecked:!0}),Object(C.jsx)(ge,{active:"finance"}),Object(C.jsxs)("div",{className:"main-content",children:[Object(C.jsx)(ve,{}),Object(C.jsxs)("main",{children:[Object(C.jsxs)("div",{className:"cards",children:[Object(C.jsxs)("div",{className:"card-single",children:[Object(C.jsxs)("div",{className:"",children:[Object(C.jsxs)("h4",{children:["UGX ",this.state.today_income]}),Object(C.jsxs)("span",{children:["Sales ",Object(C.jsx)("br",{}),Object(C.jsx)("span",{style:{fontSize:"13px"},children:"Today"})]})]}),Object(C.jsx)("div",{className:"",children:Object(C.jsx)("span",{className:"las la-users",children:" "})})]}),Object(C.jsxs)("div",{className:"card-single",children:[Object(C.jsxs)("div",{className:"",children:[Object(C.jsxs)("h4",{children:["UGX ",this.state.today_expense]}),Object(C.jsxs)("span",{children:["Purchases ",Object(C.jsx)("br",{}),Object(C.jsx)("span",{style:{fontSize:"13px"},children:"Today"})]})]}),Object(C.jsx)("div",{className:"",children:Object(C.jsx)("span",{className:"las la-users"})})]}),Object(C.jsxs)("div",{className:"card-single",children:[Object(C.jsxs)("div",{className:"",children:[Object(C.jsxs)("h4",{children:["UGX ",this.state.expenses]}),Object(C.jsx)("span",{children:"Total Purchase"})]}),Object(C.jsx)("div",{className:"",children:Object(C.jsx)("span",{className:"las la-users",children:" "})})]}),Object(C.jsxs)("div",{className:"card-single",children:[Object(C.jsxs)("div",{className:"",children:[Object(C.jsxs)("h4",{children:["UGX ",this.state.income]}),Object(C.jsx)("span",{children:"Total Income"})]}),Object(C.jsx)("div",{className:"",children:Object(C.jsx)("span",{className:"las la-users",children:" "})})]})]}),Object(C.jsxs)("div",{className:"recent-grid",children:[Object(C.jsx)("div",{className:"projects",children:Object(C.jsxs)("div",{className:"card",children:[Object(C.jsxs)("div",{className:"card-header",children:[Object(C.jsx)("h3",{children:"Sales Today"}),Object(C.jsx)("div",{className:"",children:Object(C.jsx)(se.a,{trigger:function(){return Object(C.jsxs)(f.a,{variant:"contained",color:"primary",style:{marginRight:10},children:[Object(C.jsx)("span",{style:{fontSize:"17.5px",marginRight:"10px"},children:Object(C.jsx)("i",{className:"las la-print"})}),"Print"]})},content:function(){return e.componentRef}})})]}),Object(C.jsx)("div",{className:"card-body",children:Object(C.jsxs)("table",{width:"100%",children:[Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:"Total"}),Object(C.jsx)("td",{children:"Discont"}),Object(C.jsx)("td",{children:"Paid"}),Object(C.jsx)("td",{})]})}),Object(C.jsx)("tbody",{children:0===this.state.sales.length?Object(C.jsx)("tr",{children:Object(C.jsx)("td",{children:"No Sale Made Today"})}):this.state.sales.map((function(t,a){return Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:t.sales_amount}),Object(C.jsx)("td",{children:t.sales_discount}),Object(C.jsx)("td",{children:t.amount_paid}),Object(C.jsx)("td",{children:Object(C.jsx)(f.a,{variant:"contained",color:"primary",onClick:function(a){e.setState(Object(g.a)(Object(g.a)({},e.state),{},{open_sale:!0,dialog_data:t}))},children:"Details"})})]},a)})}))})]})})]})}),Object(C.jsx)("div",{className:"projects",children:Object(C.jsxs)("div",{className:"card",children:[Object(C.jsxs)("div",{className:"card-header",children:[Object(C.jsx)("h3",{children:"Purchases Today"}),Object(C.jsx)("div",{className:"",children:Object(C.jsx)(se.a,{trigger:function(){return Object(C.jsxs)(f.a,{variant:"contained",color:"primary",style:{marginRight:10},children:[Object(C.jsx)("span",{style:{fontSize:"17.5px",marginRight:"10px"},children:Object(C.jsx)("i",{className:"las la-print"})}),"Print"]})},content:function(){return e.componentRef}})})]}),Object(C.jsx)("div",{className:"card-body",children:Object(C.jsxs)("table",{width:"100%",children:[Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:"Total"}),Object(C.jsx)("td",{children:"Discont"}),Object(C.jsx)("td",{children:"Paid"}),Object(C.jsx)("td",{})]})}),Object(C.jsx)("tbody",{children:0===this.state.purchases.length?Object(C.jsx)("tr",{children:Object(C.jsx)("td",{children:"No Purchase Made Today"})}):this.state.purchases.map((function(t,a){return Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:t.purchase_t_amount}),Object(C.jsx)("td",{children:t.purchase_discount}),Object(C.jsx)("td",{children:t.purchase_amount}),Object(C.jsx)("td",{children:Object(C.jsx)(f.a,{variant:"contained",color:"primary",onClick:function(a){e.setState(Object(g.a)(Object(g.a)({},e.state),{},{open_purchase:!0,dialog_purchase_data:t}))},children:"Details"})})]},a)})}))})]})})]})})]})]})]}),this.state.dialog_data?Object(C.jsxs)(S.a,{open:this.state.open_sale,onClose:this.handleSaleClose,"aria-labelledby":"form-dialog-title",children:[Object(C.jsx)(w.a,{id:"form-dialog-title",children:"Sale Details"}),Object(C.jsx)(N.a,{children:Object(C.jsxs)(D.a,{children:[Object(C.jsxs)("table",{width:"100%",children:[Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:"Product"}),Object(C.jsx)("td",{children:"Qty"}),Object(C.jsx)("td",{children:"Selling Unit"}),Object(C.jsx)("td",{children:"Amount"}),Object(C.jsx)("td",{children:"Sale Type"})]})}),Object(C.jsx)("tbody",{children:JSON.parse(this.state.dialog_data.products_sold).map((function(e,t){return Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:e.product_name}),Object(C.jsx)("td",{children:e.qty}),Object(C.jsx)("td",{children:e.selling_unit}),Object(C.jsx)("td",{children:e.product_price}),Object(C.jsx)("td",{children:e.sale_type})]},t)})}))})]}),Object(C.jsx)("hr",{}),Object(C.jsx)("div",{className:"",children:Object(C.jsxs)("table",{children:[Object(C.jsx)("tr",{children:Object(C.jsx)("td",{children:"Total Amount: UGX ".concat(this.state.dialog_data.sales_amount)})}),Object(C.jsx)("tr",{children:Object(C.jsx)("td",{children:"Discount: UGX  ".concat(this.state.dialog_data.sales_discount)})}),Object(C.jsx)("tr",{children:Object(C.jsx)("td",{children:"Amount Paid: UGX ".concat(this.state.dialog_data.amount_paid)})}),"Made By: ".concat(this.state.dialog_data.sale_made_by)]})})]})}),Object(C.jsx)(k.a,{children:Object(C.jsx)(f.a,{onClick:this.handleSaleClose,color:"primary",children:"Cancel"})})]}):Object(C.jsx)(C.Fragment,{}),this.state.dialog_purchase_data?Object(C.jsxs)(S.a,{open:this.state.open_purchase,onClose:this.handlePurchaseClose,"aria-labelledby":"form-dialog-title",children:[Object(C.jsx)(w.a,{id:"form-dialog-title",children:"Purchase Details"}),Object(C.jsx)(N.a,{children:Object(C.jsxs)(D.a,{children:[Object(C.jsxs)("table",{width:"100%",children:[Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:"Product"}),Object(C.jsx)("td",{children:"Qty"}),Object(C.jsx)("td",{children:"Selling Unit"}),Object(C.jsx)("td",{children:"Amount"})]})}),Object(C.jsx)("tbody",{children:JSON.parse(this.state.dialog_purchase_data.products_purchased).map((function(e,t){return Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:e.product_name}),Object(C.jsx)("td",{children:e.qty}),Object(C.jsx)("td",{children:e.selling_unit}),Object(C.jsx)("td",{children:e.cost_price})]},t)})}))})]}),Object(C.jsx)("hr",{}),Object(C.jsx)("div",{className:"",children:Object(C.jsxs)("table",{children:[Object(C.jsx)("tr",{children:Object(C.jsx)("td",{children:"Total Amount: UGX ".concat(this.state.dialog_purchase_data.purchase_t_amount)})}),Object(C.jsx)("tr",{children:Object(C.jsx)("td",{children:"Discount: UGX ".concat(this.state.dialog_purchase_data.purchase_discount)})}),Object(C.jsx)("tr",{children:Object(C.jsx)("td",{children:"Amount Paid: UGX ".concat(this.state.dialog_purchase_data.purchase_amount)})})]})})]})}),Object(C.jsx)(k.a,{children:Object(C.jsx)(f.a,{onClick:this.handlePurchaseClose,color:"primary",children:"Cancel"})})]}):Object(C.jsx)(C.Fragment,{}),Object(C.jsx)("div",{style:{display:"none"},children:Object(C.jsx)(ce,{ref:function(t){return e.componentRef=t},data:this.state.sales})})]})}}]),a}(s.Component),Qe=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={AnchorEl:null,AnchorElDrugs:null,daily:{date:"...",daily_purchases:0,daily_expenses:0,daily_products:0,daily_income:0,daily_sales:0},monthly:{month:"...",monthly_products:0,monthly_purchases:0,monthly_expenses:0,monthly_income:0,monthly_sales:0},annually:{year:"...",annual_products:0,annual_expenses:0,annual_purchases:0,annual_income:0,annual_sales:0}},s.products(),s.purchases(),s.sales(),s}return Object(l.a)(a,[{key:"products",value:function(){var e=Object(v.a)(m.a.mark((function e(){var t,a,s,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.data("/user/all/products");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:t=e.t0,a=0,s=0,c=0,"Error"===t?this.setState(Object(g.a)(Object(g.a)({},this.state),{},{daily:Object(g.a)(Object(g.a)({},this.state.daily),{},{daily_products:0}),monthly:Object(g.a)(Object(g.a)({},this.state.monthly),{},{monthly_products:0}),annually:Object(g.a)(Object(g.a)({},this.state.annually),{},{annual_products:0})})):t.forEach((function(e){new Date(parseInt(e.product_date)).getDate()===new Date(Date.now()).getDate()&&a++,new Date(parseInt(e.product_date)).getMonth()===new Date(Date.now()).getMonth()&&s++,new Date(parseInt(e.product_date)).getFullYear()===new Date(Date.now()).getFullYear()&&c++})),this.setState(Object(g.a)(Object(g.a)({},this.state),{},{daily:Object(g.a)(Object(g.a)({},this.state.daily),{},{daily_products:a,date:new Date(Date.now()).getDate()+"/"+(new Date(Date.now()).getMonth()+1)+"/"+new Date(Date.now()).getFullYear()}),monthly:Object(g.a)(Object(g.a)({},this.state.monthly),{},{monthly_products:s}),annually:Object(g.a)(Object(g.a)({},this.state.annually),{},{year:new Date(Date.now()).getFullYear(),annual_products:c})})),0===new Date(Date.now()).getMonth()?this.setState(Object(g.a)(Object(g.a)({},this.state),{},{monthly:Object(g.a)(Object(g.a)({},this.state.monthly),{},{month:"January"})})):1===new Date(Date.now()).getMonth()?this.setState(Object(g.a)(Object(g.a)({},this.state),{},{monthly:Object(g.a)(Object(g.a)({},this.state.monthly),{},{month:"February"})})):2===new Date(Date.now()).getMonth()?this.setState(Object(g.a)(Object(g.a)({},this.state),{},{monthly:Object(g.a)(Object(g.a)({},this.state.monthly),{},{month:"March"})})):3===new Date(Date.now()).getMonth()?this.setState(Object(g.a)(Object(g.a)({},this.state),{},{monthly:Object(g.a)(Object(g.a)({},this.state.monthly),{},{month:"April"})})):4===new Date(Date.now()).getMonth()?this.setState(Object(g.a)(Object(g.a)({},this.state),{},{monthly:Object(g.a)(Object(g.a)({},this.state.monthly),{},{month:"May"})})):5===new Date(Date.now()).getMonth()?this.setState(Object(g.a)(Object(g.a)({},this.state),{},{monthly:Object(g.a)(Object(g.a)({},this.state.monthly),{},{month:"June"})})):6===new Date(Date.now()).getMonth()?this.setState(Object(g.a)(Object(g.a)({},this.state),{},{monthly:Object(g.a)(Object(g.a)({},this.state.monthly),{},{month:"July"})})):7===new Date(Date.now()).getMonth()?this.setState(Object(g.a)(Object(g.a)({},this.state),{},{monthly:Object(g.a)(Object(g.a)({},this.state.monthly),{},{month:"August"})})):8===new Date(Date.now()).getMonth()?this.setState(Object(g.a)(Object(g.a)({},this.state),{},{monthly:Object(g.a)(Object(g.a)({},this.state.monthly),{},{month:"September"})})):9===new Date(Date.now()).getMonth()?this.setState(Object(g.a)(Object(g.a)({},this.state),{},{monthly:Object(g.a)(Object(g.a)({},this.state.monthly),{},{month:"October"})})):10===new Date(Date.now()).getMonth()?this.setState(Object(g.a)(Object(g.a)({},this.state),{},{monthly:Object(g.a)(Object(g.a)({},this.state.monthly),{},{month:"November"})})):11===new Date(Date.now()).getMonth()&&this.setState(Object(g.a)(Object(g.a)({},this.state),{},{monthly:Object(g.a)(Object(g.a)({},this.state.monthly),{},{month:"December"})}));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"purchases",value:function(){var e=Object(v.a)(m.a.mark((function e(){var t,a,s,c,n,r,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.data("/user/all/purchases");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:t=e.t0,a=0,s=0,c=0,n=0,r=0,i=0,"Error"===t?this.setState(Object(g.a)(Object(g.a)({},this.state),{},{daily:Object(g.a)(Object(g.a)({},this.state.daily),{},{daily_purchases:0,daily_expenses:0}),monthly:Object(g.a)(Object(g.a)({},this.state.monthly),{},{monthly_expenses:0,monthly_purchases:0}),annually:Object(g.a)(Object(g.a)({},this.state.annually),{},{annual_expenses:0,annual_purchases:0})})):t.forEach((function(e){new Date(parseInt(e.purchase_date)).getDate()===new Date(Date.now()).getDate()&&(a++,s+=e.purchase_amount),new Date(Date.now()).getMonth()===new Date(parseInt(e.purchase_date)).getMonth()&&(c++,n+=e.purchase_amount),new Date(Date.now()).getFullYear()===new Date(parseInt(e.purchase_date)).getFullYear()&&(r++,i+=e.purchase_amount)})),this.setState(Object(g.a)(Object(g.a)({},this.state),{},{daily:Object(g.a)(Object(g.a)({},this.state.daily),{},{daily_purchases:a,daily_expenses:s}),monthly:Object(g.a)(Object(g.a)({},this.state.monthly),{},{monthly_expenses:n,monthly_purchases:c}),annually:Object(g.a)(Object(g.a)({},this.state.annually),{},{annual_expenses:i,annual_purchases:r})}));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sales",value:function(){var e=Object(v.a)(m.a.mark((function e(){var t,a,s,c,n,r,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.data("/user/all/sales");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:t=e.t0,a=0,s=0,c=0,n=0,r=0,i=0,"Error"===t?this.setState(Object(g.a)(Object(g.a)({},this.state),{},{daily:Object(g.a)(Object(g.a)({},this.state.daily),{},{daily_income:0,daily_sales:0}),monthly:Object(g.a)(Object(g.a)({},this.state.monthly),{},{monthly_income:0,monthly_sales:0}),annually:Object(g.a)(Object(g.a)({},this.state.annually),{},{annual_income:0,annual_sales:0})})):t.forEach((function(e){new Date(parseInt(e.sales_date)).getDate()===new Date(Date.now()).getDate()&&(a+=e.amount_paid,s++),new Date(Date.now()).getMonth()===new Date(parseInt(e.sales_date)).getMonth()&&(c+=e.amount_paid,n++),new Date(Date.now()).getFullYear()===new Date(parseInt(e.sales_date)).getFullYear()&&(r+=e.amount_paid,i++)})),this.setState(Object(g.a)(Object(g.a)({},this.state),{},{daily:Object(g.a)(Object(g.a)({},this.state.daily),{},{daily_sales:s,daily_income:a}),monthly:Object(g.a)(Object(g.a)({},this.state.monthly),{},{monthly_sales:n,monthly_income:c}),annually:Object(g.a)(Object(g.a)({},this.state.annually),{},{annual_sales:i,annual_income:r})}));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("input",{type:"checkbox",id:"nav-toggle",defaultChecked:!0}),Object(C.jsx)(ge,{active:"reports"}),Object(C.jsxs)("div",{className:"main-content",children:[Object(C.jsx)(ve,{}),Object(C.jsxs)("main",{children:[Object(C.jsxs)("div",{className:"recent-grid",children:[Object(C.jsx)("div",{className:"projects",children:Object(C.jsxs)("div",{className:"card",children:[Object(C.jsxs)("div",{className:"card-header",children:[Object(C.jsx)("h3",{children:"Today"}),Object(C.jsxs)(f.a,{variant:"contained",color:"primary","aria-haspopup":"true",children:["print",Object(C.jsx)("span",{style:{fontSize:"17.5px",marginLeft:"10px"},children:Object(C.jsx)("span",{className:"las la-print"})})]})]}),Object(C.jsx)("div",{className:"card-body",children:Object(C.jsx)("div",{className:"",children:Object(C.jsxs)("table",{width:"100%",children:[Object(C.jsx)("tr",{children:Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder",color:"red"},children:"Date:"}),"  ".concat(this.state.daily.date)]})}),Object(C.jsxs)("tr",{children:[Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Total Purchases:"}),"  ".concat(this.state.daily.daily_purchases)]}),Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Total Sales:"})," ".concat(this.state.daily.daily_sales)]})]}),Object(C.jsxs)("tr",{children:[Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Total Expenses:"}),"  UGX ".concat(this.state.daily.daily_expenses)]}),Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Total Income:"})," UGX ".concat(this.state.daily.daily_income)]})]}),Object(C.jsx)("tr",{children:Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Products Registered:"}),"  ".concat(this.state.daily.daily_products)]})})]})})})]})}),Object(C.jsx)("div",{className:"projects",children:Object(C.jsxs)("div",{className:"card",children:[Object(C.jsxs)("div",{className:"card-header",children:[Object(C.jsx)("h3",{children:"This Month"}),Object(C.jsxs)(f.a,{variant:"contained",color:"primary","aria-controls":"reception-actions","aria-haspopup":"true",children:["print",Object(C.jsx)("span",{style:{fontSize:"17.5px",marginLeft:"10px"},children:Object(C.jsx)("span",{className:"las la-print"})})]})]}),Object(C.jsx)("div",{className:"card-body",children:Object(C.jsx)("div",{className:"",children:Object(C.jsxs)("table",{width:"100%",children:[Object(C.jsx)("tr",{children:Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder",color:"red"},children:"Month:"}),"  ".concat(this.state.monthly.month)]})}),Object(C.jsxs)("tr",{children:[Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Total Purchases:"})," ".concat(this.state.monthly.monthly_purchases)]}),Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Total Sales:"})," ".concat(this.state.monthly.monthly_sales)]})]}),Object(C.jsxs)("tr",{children:[Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Total Expenses:"}),"  UGX ".concat(this.state.monthly.monthly_expenses)]}),Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Total Income:"}),"UGX ".concat(this.state.monthly.monthly_income)]})]}),Object(C.jsx)("tr",{children:Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Products Registered:"}),"  ".concat(this.state.monthly.monthly_products)]})})]})})})]})})]}),Object(C.jsx)("div",{className:"recent-grid",children:Object(C.jsx)("div",{className:"projects",children:Object(C.jsxs)("div",{className:"card",children:[Object(C.jsxs)("div",{className:"card-header",children:[Object(C.jsx)("h3",{children:"This Year"}),Object(C.jsxs)(f.a,{variant:"contained",color:"primary","aria-haspopup":"true",children:["print",Object(C.jsx)("span",{style:{fontSize:"17.5px",marginLeft:"10px"},children:Object(C.jsx)("span",{className:"las la-print"})})]})]}),Object(C.jsx)("div",{className:"card-body",children:Object(C.jsx)("div",{className:"",children:Object(C.jsxs)("table",{width:"100%",children:[Object(C.jsx)("tr",{children:Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder",color:"red"},children:"Year:"}),"  ".concat(this.state.annually.year)]})}),Object(C.jsxs)("tr",{children:[Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Total Purchases:"}),"  ".concat(this.state.annually.annual_purchases)]}),Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Total Sales:"})," ".concat(this.state.annually.annual_sales)]})]}),Object(C.jsxs)("tr",{children:[Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Total Expenses:"}),"  UGX ".concat(this.state.annually.annual_expenses)]}),Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Total Income:"})," UGX ".concat(this.state.annually.annual_income)]})]}),Object(C.jsx)("tr",{children:Object(C.jsxs)("td",{children:[Object(C.jsx)("span",{style:{fontWeight:"bolder"},children:"Products Registered:"}),"  ".concat(this.state.annually.annual_products)]})})]})})})]})})})]})]})]})}}]),a}(s.Component),Je=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={},s}return Object(l.a)(a,[{key:"render",value:function(){return Object(C.jsx)(O.a,{children:Object(C.jsx)("div",{children:Object(C.jsxs)(p.c,{children:[Object(C.jsx)(p.a,{path:"/",exact:!0,component:fe}),Object(C.jsx)(p.a,{path:"/new-product",exact:!0,component:_e}),Object(C.jsx)(p.a,{path:"/new-supplier",exact:!0,component:we}),Object(C.jsx)(p.a,{path:"/new-customer",exact:!0,component:De}),Object(C.jsx)(p.a,{path:"/new-user",exact:!0,component:Ce}),Object(C.jsx)(p.a,{path:"/new-purchase",exact:!0,component:Fe}),Object(C.jsx)(p.a,{path:"/new-sale",exact:!0,component:Ae}),Object(C.jsx)(p.a,{path:"/all-products",exact:!0,component:qe}),Object(C.jsx)(p.a,{path:"/product",exact:!0,component:Re}),Object(C.jsx)(p.a,{path:"/edit-product",exact:!0,component:Me}),Object(C.jsx)(p.a,{path:"/finance",exact:!0,component:Ve}),Object(C.jsx)(p.a,{path:"/reports",exact:!0,component:Qe}),Object(C.jsx)(p.a,{path:"*",component:pe})]})})})}}]),a}(s.Component),Le=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={user:u},s}return Object(l.a)(a,[{key:"render",value:function(){return"admin"===u.user.user_role?Object(C.jsx)(Je,{}):"dispenser"===u.user.user_role?Object(C.jsx)(xe,{}):"cashier"===u.user.user_role?Object(C.jsx)(me,{}):Object(C.jsx)(z,{})}}]),a}(s.Component),Be=a(203),He=a(105),Ke=Object(He.a)({typography:{fontFamily:'"Ubuntu", sans-serifs',fontSize:14,fontWeightLight:300,fontWeightRegular:400,fontWeightMedium:500}}),Ge=function(){return Object(C.jsx)(Be.a,{theme:Ke,children:Object(C.jsx)(Le,{})})};r.a.render(Object(C.jsx)(Ge,{}),document.getElementById("root"))},41:function(e,t,a){},61:function(e,t,a){},89:function(e,t,a){}},[[153,1,2]]]);
//# sourceMappingURL=main.4785969a.chunk.js.map